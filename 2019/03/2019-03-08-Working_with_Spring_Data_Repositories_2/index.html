<!DOCTYPE html><html lang="lang"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="spring data jpa repositorys로 작업하기(Repository Interfaces 정의)"><meta name="keywords" content="spring,spring data jpa"><meta name="author" content="sejoung"><meta name="copyright" content="sejoung"><title>spring data jpa repositorys로 작업하기(Repository Interfaces 정의) | 폭간의 기술블로그</title><link rel="shortcut icon" href="../../../my-favicon.ico"><link rel="stylesheet" href="../../../css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script async src="https://www.googletagmanager.com/gtag/js?id=G-NVRTGLD8RZ"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-NVRTGLD8RZ');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 5.4.2"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#spring-data-jpa-repositorys%EB%A1%9C-%EC%9E%91%EC%97%85%ED%95%98%EA%B8%B0-Repository-Interfaces-%EC%A0%95%EC%9D%98"><span class="toc-number">1.</span> <span class="toc-text">spring data jpa repositorys로 작업하기(Repository Interfaces 정의)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Repository-%EB%AF%B8%EC%84%B8%EC%A1%B0%EC%A0%95-%EC%A0%95%EC%9D%98"><span class="toc-number">1.1.</span> <span class="toc-text">Repository 미세조정 정의</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Repository-Methods%EC%97%90%EC%84%9C-null-%EC%B2%98%EB%A6%AC"><span class="toc-number">1.1.1.</span> <span class="toc-text">Repository Methods에서 null 처리</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EB%8B%A4%EC%A4%91-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%AA%A8%EB%93%88%EC%9D%B4%EC%9E%88%EB%8A%94-%EB%A6%AC%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC-%EC%82%AC%EC%9A%A9"><span class="toc-number">1.2.</span> <span class="toc-text">다중 스프링 데이터 모듈이있는 리포지토리 사용</span></a></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#%EC%B0%B8%EC%A1%B0"><span class="toc-number"></span> <span class="toc-text">참조</span></a></li></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://avatars0.githubusercontent.com/u/4936005?s=400&amp;u=a679b941fe377418e7e4efcf916c6a636d7178ee&amp;v=4"></div><div class="author-info__name text-center">sejoung</div><div class="author-info__description text-center">잘정리하자</div><div class="follow-button"><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/sejoung">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="../../../archives"><span class="pull-left">Articles</span><span class="pull-right">715</span></a><a class="author-info-articles__tags article-meta" href="../../../tags"><span class="pull-left">Tags</span><span class="pull-right">771</span></a><a class="author-info-articles__categories article-meta" href="../../../categories"><span class="pull-left">Categories</span><span class="pull-right">74</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" target="_blank" rel="external nofollow noopener noreferrer" href="https://blog.naver.com/sanaes">naverblog</a><a class="author-info-links__name text-center" target="_blank" rel="external nofollow noopener noreferrer" href="https://www.linkedin.com/in/sanaes/">linkedin</a><a class="author-info-links__name text-center" target="_blank" rel="external nofollow noopener noreferrer" href="https://www.slideshare.net/sejoung">slideshare</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/Van_Gogh_-_Terrasse_des_Caf%C3%A9s_an_der_Place_du_Forum_in_Arles_am_Abend1.jpeg/1024px-Van_Gogh_-_Terrasse_des_Caf%C3%A9s_an_der_Place_du_Forum_in_Arles_am_Abend1.jpeg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="../../../index.html">폭간의 기술블로그</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">spring data jpa repositorys로 작업하기(Repository Interfaces 정의)</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-03-08</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="../../../categories/java/">java</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2019/03/2019-03-08-Working_with_Spring_Data_Repositories_2/"></span></a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="spring-data-jpa-repositorys로-작업하기-Repository-Interfaces-정의"><a href="#spring-data-jpa-repositorys로-작업하기-Repository-Interfaces-정의" class="headerlink" title="spring data jpa repositorys로 작업하기(Repository Interfaces 정의)"></a>spring data jpa repositorys로 작업하기(Repository Interfaces 정의)</h2><p>먼저 도메인 클래스 별 저장소 인터페이스를 정의하십시오.<br>인터페이스는 Repository도메인 클래스와 ID 유형으로 확장 되고 유형화 되어야합니다.<br>해당 도메인 유형에 대해 CRUD 메소드를 노출하려면 Repository 대신에 CrudRepository 확장하십시오 .</p>
<h3 id="Repository-미세조정-정의"><a href="#Repository-미세조정-정의" class="headerlink" title="Repository 미세조정 정의"></a>Repository 미세조정 정의</h3><p>일반적으로 저장소 인터페이스 Repository는 CrudRepository 또는 PagingAndSortingRepository 확장됩니다.<br>또는 Spring 데이터 인터페이스를 확장하지 않으려는 경우 @RepositoryDefinition 저장소 인터페이스에 주석을 달 수 있습니다. </p>
<p>CrudRepository 확장은 엔티티를 조작하기위한 완전한 메소드 세트를 제공합니다. </p>
<p>노출되는 메소드를 선택적으로 선호하는 경우 노출하려는 메소드를 CrudRepository 도메인 리포지토리에 복사하십시오 .</p>
<p>아래의 선택노출을 위한 예제 코드입니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@NoRepositoryBean</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MyBaseRepository</span>&lt;T, ID <span class="keyword">extends</span> <span class="title class_">Serializable</span>&gt; <span class="keyword">extends</span> <span class="title class_">Repository</span>&lt;T, ID&gt; &#123;</span><br><span class="line"></span><br><span class="line">  Optional&lt;T&gt; <span class="title function_">findById</span><span class="params">(ID id)</span>;</span><br><span class="line"></span><br><span class="line">  &lt;S <span class="keyword">extends</span> <span class="title class_">T</span>&gt; S <span class="title function_">save</span><span class="params">(S entity)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">UserRepository</span> <span class="keyword">extends</span> <span class="title class_">MyBaseRepository</span>&lt;User, Long&gt; &#123;</span><br><span class="line">  User <span class="title function_">findByEmailAddress</span><span class="params">(EmailAddress emailAddress)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>이전의 예에서, 모든 도메인 저장소에 대한 공통 기본 인터페이스를 정의하고 노출 findById(…) 뿐만 아니라 save(…).<br>그들의 메소드를 사용하면 당신이 사용하는 경우 spring-data-jpa 가 제공하는 선택의 저장소의 기본 저장소 구현에 연결됩니다(예를 들어, 구현은 SimpleJpaRepository),<br>그것들은 CrudRepository 메소드의 서명과 일치하기 때문에입니다.<br>그래서는 UserRepository지금 사용자를 저장 ID에 의해 개별 사용자를 발견 사용자의 이메일 주소를 찾을 수있는 쿼리를 실행.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">중간 저장소 인터페이스는로 @NoRepositoryBean 주석 처리됩니다. </span><br><span class="line">Spring 데이터가 런타임에 인스턴스를 생성해서는 안되는 모든 저장소 인터페이스에 해당 주석을 추가해야합니다.</span><br></pre></td></tr></table></figure>

<h4 id="Repository-Methods에서-null-처리"><a href="#Repository-Methods에서-null-처리" class="headerlink" title="Repository Methods에서 null 처리"></a>Repository Methods에서 null 처리</h4><p>Spring Data 2.0부터 개별 집계 인스턴스를 반환하는 저장소 CRUD 메소드는 잠재적 인 값 부재를 나타내는 Optional(Java 8)을 사용 합니다. </p>
<p>그 외에도 Spring 데이터는 쿼리 메소드에 다음과 같은 래퍼 유형을 반환하는 것을 지원합니다.</p>
<ul>
<li>com.google.common.base.Optional</li>
<li>scala.Option</li>
<li>io.vavr.control.Option</li>
<li>javaslang.control.Option (deprecated as Javaslang is deprecated)</li>
</ul>
<p>또는 쿼리 메서드는 래퍼 유형을 전혀 사용하지 않도록 선택할 수 있습니다.<br>조회 결과가없는 경우 null 반환으로 표시됩니다.<br>콜렉션, 컬렉션의 대체 메소드, 래퍼 및 스트림을 돌려주는 리포지터리 (repository) 메소드는 결코 null을 반환하지 않고,<br>빈 상태 (empty)의 표현에 대응합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Optional&lt;T&gt; : Java 8 또는 Guava Optional.</span><br><span class="line">조회 메소드가 하나의 결과 만 리턴하도록합니다. </span><br><span class="line">어떤 결과가 발견되지 않는 경우, Optional.empty() 또는 Optional.absent()반환 됩니다. </span><br><span class="line">하나 이상의 결과는 IncorrectResultSizeDataAccessException 발생한다.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Nullability Annotations</p>
<p>Spring Framework의 Nullability 어노테이션을 사용하여 저장소 메소드에 대한 Null 허용 제한 조건을 표현할 수 있다.<br>도구 친화적 인 접근법을 제공하며 다음과 같이 런타임 중에 선택적인 null 검사를 수행합니다.</p>
<ul>
<li>@NonNullApi: 매개 변수 및 반환 값의 기본 동작이 값을 수락하거나 null 생성하지 않는다고 선언하는 데 패키지 수준에서 사용 됩니다.</li>
<li>@NonNull: 매개 변수 나 반환 값에 null이 사용되지 않아야합니다( @NonNullApi적용되는 경우 매개 변수와 반환 값에 필요하지 않음 ).</li>
<li>@Nullable: 매개 변수 나 리턴 값에 null이 사용될 수 있습니다 .</li>
</ul>
<p>package-info.java에서 null 허용하지 않을때 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@org</span>.springframework.lang.NonNullApi</span><br><span class="line"><span class="keyword">package</span> com.acme;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>null을 허용하지 않음이 기본값으로 설정되면 저장소 쿼리 메서드 호출은 런타임에 null 허용 제한 조건에 대해 유효성이 검사됩니다.<br>쿼리 실행 결과가 정의 된 제약 조건을 위반하면 예외가 발생합니다.<br>이것은 메소드가 리턴 null되지만 nullable이 아닌 것으로 선언 될 때 발생 합니다(저장소가 상주하는 패키지에 정의 된 주석이있는 기본값).<br>nullable 결과를 다시 허용하려면 @Nullable 어너테이션을 개별 메소드를 선택적으로 사용하십시오.<br>이 섹션 시작 부분에 언급 된 결과 래퍼 유형을 사용하면 예상대로 계속 작동합니다.<br>비어있는 결과는 부재를 나타내는 값으로 변환됩니다.</p>
<p>다음 예제는 방금 설명한 여러 기술을 보여줍니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@org</span>.springframework.lang.NonNullApi</span><br><span class="line"><span class="keyword">package</span> com.acme; <span class="comment">//(1)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.acme;                               <span class="comment">//(2)                        </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.lang.Nullable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">UserRepository</span> <span class="keyword">extends</span> <span class="title class_">Repository</span>&lt;User, Long&gt; &#123;</span><br><span class="line"></span><br><span class="line">  User <span class="title function_">getByEmailAddress</span><span class="params">(EmailAddress emailAddress)</span>;                    <span class="comment">//(3) </span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Nullable</span></span><br><span class="line">  User <span class="title function_">findByEmailAddress</span><span class="params">(<span class="meta">@Nullable</span> EmailAddress emailAdress)</span>;          <span class="comment">//(4)</span></span><br><span class="line"></span><br><span class="line">  Optional&lt;User&gt; <span class="title function_">findOptionalByEmailAddress</span><span class="params">(EmailAddress emailAddress)</span>; <span class="comment">//(5)</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol>
<li>null을 허용하지 않음을 패키지에 정의 </li>
<li>저장소는 null을 허용하지 않음을 정의한 패키지(또는 하위 패키지)에 있다</li>
<li>실행 된 쿼리가 결과를 생성하지 않을 때를 EmptyResultDataAccessException 을 던집니다. 메서드에 건네 준 emailAddress 가 null 일때 IllegalArgumentException 을 던집니다.</li>
<li>실행 된 쿼리가 결과를 생성하지 않을 때를 null을 반환 합니다. 또한 emailAddress의 null값을 받아들 입니다.</li>
<li>실행 된 쿼리가 결과를 생성하지 않을 때를 Optional.empty() 반환 합니다. 메서드에 건네 준 emailAddress 가 null 일때 IllegalArgumentException 을 던집니다.</li>
</ol>
<h3 id="다중-스프링-데이터-모듈이있는-리포지토리-사용"><a href="#다중-스프링-데이터-모듈이있는-리포지토리-사용" class="headerlink" title="다중 스프링 데이터 모듈이있는 리포지토리 사용"></a>다중 스프링 데이터 모듈이있는 리포지토리 사용</h3><p>응용 프로그램에서 고유 한 스프링 데이터 모듈을 사용하면 정의 된 범위의 모든 저장소 인터페이스가 스프링 데이터 모듈에 바인딩되므로 작업이 간단 해집니다.<br>때때로, 어플리케이션은 하나 이상의 Spring Data 모듈을 사용해야합니다.<br>그러한 경우, 저장소 정의는 영속 기술을 구별해야합니다.<br>클래스 경로에서 여러 저장소 팩토리를 탐지하면 Spring 데이터는 엄격한 저장소 구성 모드로 들어갑니다.<br>엄격한 구성은 저장소 또는 도메인 클래스의 세부 정보를 사용하여 저장소 정의에 대한 Spring 데이터 모듈 바인딩을 결정합니다.</p>
<p>저장소 정의 가 모듈 특정 저장소를 확장 하면 특정 스프링 데이터 모듈에 대한 유효한 후보가됩니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MyRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;User, Long&gt; &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoRepositoryBean</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MyBaseRepository</span>&lt;T, ID <span class="keyword">extends</span> <span class="title class_">Serializable</span>&gt; <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;T, ID&gt; &#123;</span><br><span class="line">  …</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">UserRepository</span> <span class="keyword">extends</span> <span class="title class_">MyBaseRepository</span>&lt;User, Long&gt; &#123;</span><br><span class="line">  …</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>도메인 클래스 에 모듈 별 유형 주석 이 주석되어 있으면 특정 스프링 데이터 모듈에 대한 유효한 후보가됩니다.<br>스프링 데이터 모듈은 제 3 자 애노테이션 (예 : JPA @Entity)을 허용하거나 자신의 애노테이션 (예 : @Document Spring Data MongoDB 및 Spring Data Elasticsearch)을 제공합니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonRepository</span> <span class="keyword">extends</span> <span class="title class_">Repository</span>&lt;Person, Long&gt; &#123;</span><br><span class="line"> …</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  …</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">UserRepository</span> <span class="keyword">extends</span> <span class="title class_">Repository</span>&lt;User, Long&gt; &#123;</span><br><span class="line"> …</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Document</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  …</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>다음 예제는 제네릭 인터페이스를 사용하는 저장소를 보여줍니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">AmbiguousRepository</span> <span class="keyword">extends</span> <span class="title class_">Repository</span>&lt;User, Long&gt; &#123;</span><br><span class="line"> …</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoRepositoryBean</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MyBaseRepository</span>&lt;T, ID <span class="keyword">extends</span> <span class="title class_">Serializable</span>&gt; <span class="keyword">extends</span> <span class="title class_">CrudRepository</span>&lt;T, ID&gt; &#123;</span><br><span class="line">  …</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">AmbiguousUserRepository</span> <span class="keyword">extends</span> <span class="title class_">MyBaseRepository</span>&lt;User, Long&gt; &#123;</span><br><span class="line">  …</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>AmbiguousRepository및 AmbiguousUserRepository 자신의 유형 계층 구조에서 Repository와 CrudRepository  단지 확장만 함.<br>고유 한 스프링 데이터 모듈을 사용할 때 이것이 완벽하게 훌륭하지만,<br>여러 모듈은이 리포지토리가 어느 특정 스프링 데이터에 바인드되어야 하는지를 구분할 수 없습니다.</p>
<p>위에 코드로는 바인딩 되지 않습니다.</p>
<p>또 잘못 된 예로 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">JpaPersonRepository</span> <span class="keyword">extends</span> <span class="title class_">Repository</span>&lt;Person, Long&gt; &#123;</span><br><span class="line"> …</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MongoDBPersonRepository</span> <span class="keyword">extends</span> <span class="title class_">Repository</span>&lt;Person, Long&gt; &#123;</span><br><span class="line"> …</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Document</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  …</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>이 예제는 JPA와 Spring Data MongoDB 어노테이션을 모두 사용하는 도메인 클래스를 보여준다.<br>그것은 다음에 두 개의 저장소를 정의 JpaPersonRepository 하고 MongoDBPersonRepository.<br>하나는 JPA 용이고 다른 하나는 MongoDB 용입니다.<br>Spring Data는 더 이상 리포지토리를 구분할 수 없으므로 정의되지 않은 동작이 발생합니다.</p>
<p>저장소 유형 세부 사항 과 구별되는 도메인 클래스 어노테이션 은 엄격한 저장소 구성에 사용되어 특정 스프링 데이터 모듈에 대한 저장소 후보를 식별합니다.<br>동일한 도메인 유형에서 여러 지속성 기술 별 주석을 사용할 수 있으며 여러 지속성 기술에서 도메인 유형을 재사용 할 수 있습니다.<br>그러나 스프링 데이터는 더 이상 저장소를 바인딩 할 고유 모듈을 결정할 수 없습니다.</p>
<p>저장소를 구별하는 마지막 방법은 저장소 기본 패키지를 범위 지정하는 것입니다.<br>기본 패키지는 리포지토리 인터페이스 정의를 검색하기위한 시작 지점을 정의합니다.<br>이는 리포지토리 정의가 적절한 패키지에 있음을 의미합니다.<br>기본적으로 어너테이션 중심 구성에서는 구성 클래스의 패키지를 사용합니다.<br>XML 기반 구성 의 기본 패키지 는 필수입니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@EnableJpaRepositories(basePackages = &quot;com.acme.repositories.jpa&quot;)</span></span><br><span class="line"><span class="meta">@EnableMongoRepositories(basePackages = &quot;com.acme.repositories.mongo&quot;)</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Configuration</span> &#123; &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h1><hr>
<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.spring.io/spring-data/jpa/docs/2.1.5.RELEASE/reference/html/#repositories">spring-data-jpa reference</a></li>
</ul>
</div></article><div class="post-meta__tag-list"><a class="post-meta__tags" href="../../../tags/spring/">spring</a><a class="post-meta__tags" href="../../../tags/spring-data-jpa/">spring data jpa</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="../2019-03-08-Working_with_Spring_Data_Repositories_3/"><i class="fa fa-chevron-left">  </i><span>spring data jpa repositorys로 작업하기(Query Methods 정의)</span></a></div><div class="next-post pull-right"><a href="../2019-03-08-Working_with_Spring_Data_Repositories_1/"><span>spring data jpa repositorys로 작업하기(핵심 개념 및 Query methods)</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://sejoung.github.io/2019/03/2019-03-08-Working_with_Spring_Data_Repositories_2/';
  this.page.identifier = '2019/03/2019-03-08-Working_with_Spring_Data_Repositories_2/';
  this.page.title = 'spring data jpa repositorys로 작업하기(Repository Interfaces 정의)';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'kimsejoung' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://kimsejoung.disqus.com/count.js" async></script></div></div><footer class="footer-bg" style="background-image: url(https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/Van_Gogh_-_Terrasse_des_Caf%C3%A9s_an_der_Place_du_Forum_in_Arles_am_Abend1.jpeg/1024px-Van_Gogh_-_Terrasse_des_Caf%C3%A9s_an_der_Place_du_Forum_in_Arles_am_Abend1.jpeg)"><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2023 By sejoung</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="external nofollow noopener noreferrer" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="../../../js/third-party/anime.min.js"></script><script src="../../../js/third-party/jquery.min.js"></script><script src="../../../js/third-party/jquery.fancybox.min.js"></script><script src="../../../js/third-party/velocity.min.js"></script><script src="../../../js/third-party/velocity.ui.min.js"></script><script src="../../../js/utils.js?version=1.7.0"></script><script src="../../../js/fancybox.js?version=1.7.0"></script><script src="../../../js/sidebar.js?version=1.7.0"></script><script src="../../../js/copy.js?version=1.7.0"></script><script src="../../../js/fireworks.js?version=1.7.0"></script><script src="../../../js/transition.js?version=1.7.0"></script><script src="../../../js/scroll.js?version=1.7.0"></script><script src="../../../js/head.js?version=1.7.0"></script><script src="../../../js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>