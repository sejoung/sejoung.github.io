<!DOCTYPE html><html lang="lang"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="mssql CREATE PROCEDURE"><meta name="keywords" content="mssql,Transact-SQL,CREATE PROCEDURE"><meta name="author" content="sejoung"><meta name="copyright" content="sejoung"><title>mssql CREATE PROCEDURE | 폭간의 기술블로그</title><link rel="shortcut icon" href="../../../my-favicon.ico"><link rel="stylesheet" href="../../../css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-87353572-1', 'auto');
ga('send', 'pageview');</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-NVRTGLD8RZ"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-NVRTGLD8RZ');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 5.4.2"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#CREATE-PROCEDURE"><span class="toc-number">1.</span> <span class="toc-text">CREATE PROCEDURE</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Syntax"><span class="toc-number">1.1.</span> <span class="toc-text">Syntax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Arguments"><span class="toc-number">1.2.</span> <span class="toc-text">Arguments</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#OR-ALTER"><span class="toc-number">1.2.1.</span> <span class="toc-text">OR ALTER</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#schema-name"><span class="toc-number">1.2.2.</span> <span class="toc-text">schema_name</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#procedure-name"><span class="toc-number">1.2.3.</span> <span class="toc-text">procedure_name</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#number"><span class="toc-number">1.2.4.</span> <span class="toc-text">number</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#parameter"><span class="toc-number">1.2.5.</span> <span class="toc-text">@ parameter</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#type-schema-name-data-type"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">[ type_schema_name . ] data_type</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Transact-SQL-%ED%94%84%EB%A1%9C-%EC%8B%9C%EC%A0%80%EC%97%90-%EB%8C%80%ED%95%9C-%EC%A7%80%EC%B9%A8"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">Transact-SQL 프로 시저에 대한 지침</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CLR-%EC%A0%88%EC%B0%A8-%EC%A7%80%EC%B9%A8"><span class="toc-number">1.2.5.3.</span> <span class="toc-text">CLR 절차 지침</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VARYING"><span class="toc-number">1.2.6.</span> <span class="toc-text">VARYING</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#default"><span class="toc-number">1.2.7.</span> <span class="toc-text">default</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#OUT-OUTPUT"><span class="toc-number">1.2.8.</span> <span class="toc-text">OUT | OUTPUT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#READONLY"><span class="toc-number">1.2.9.</span> <span class="toc-text">READONLY</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RECOMPILE"><span class="toc-number">1.2.10.</span> <span class="toc-text">RECOMPILE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ENCRYPTION"><span class="toc-number">1.2.11.</span> <span class="toc-text">ENCRYPTION</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EXECUTE-AS-clause"><span class="toc-number">1.2.12.</span> <span class="toc-text">EXECUTE AS clause</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FOR-REPLICATION"><span class="toc-number">1.2.13.</span> <span class="toc-text">FOR REPLICATION</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BEGIN-sql-statement-%E2%80%A6-n-END"><span class="toc-number">1.2.14.</span> <span class="toc-text">{[BEGIN] sql_statement [;] [… n ] [END]}</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ATOMIC-WITH"><span class="toc-number">1.2.15.</span> <span class="toc-text">ATOMIC WITH</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NULL-NOT-NULL"><span class="toc-number">1.2.16.</span> <span class="toc-text">NULL | NOT NULL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NATIVE-COMPILATION"><span class="toc-number">1.2.17.</span> <span class="toc-text">NATIVE_COMPILATION</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SCHEMABINDING"><span class="toc-number">1.2.18.</span> <span class="toc-text">SCHEMABINDING</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#LANGUAGE-x3D-N-%E2%80%98language%E2%80%99"><span class="toc-number">1.2.19.</span> <span class="toc-text">LANGUAGE &#x3D; [N] ‘language’</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TRANSACTION-ISOLATION-LEVEL"><span class="toc-number">1.2.20.</span> <span class="toc-text">TRANSACTION ISOLATION LEVEL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#REPEATABLE-READ"><span class="toc-number">1.2.21.</span> <span class="toc-text">REPEATABLE READ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SERIALIZABLE"><span class="toc-number">1.2.22.</span> <span class="toc-text">SERIALIZABLE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SNAPSHOT"><span class="toc-number">1.2.23.</span> <span class="toc-text">SNAPSHOT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DATEFIRST-x3D-number"><span class="toc-number">1.2.24.</span> <span class="toc-text">DATEFIRST &#x3D; number</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DATEFORMAT-x3D-format"><span class="toc-number">1.2.25.</span> <span class="toc-text">DATEFORMAT &#x3D; format</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DELAYED-DURABILITY-x3D-OFF-ON"><span class="toc-number">1.2.26.</span> <span class="toc-text">DELAYED_DURABILITY &#x3D; {OFF | ON}</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Simple-Examples"><span class="toc-number">1.3.</span> <span class="toc-text">Simple Examples</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Best-Practices"><span class="toc-number">1.4.</span> <span class="toc-text">Best Practices</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#General-Remarks"><span class="toc-number">1.5.</span> <span class="toc-text">General Remarks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Interoperability"><span class="toc-number">1.6.</span> <span class="toc-text">Interoperability</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%ED%95%9C%EA%B3%84%EC%82%AC%ED%95%AD%EA%B3%BC-%EC%A0%9C%ED%95%9C%EC%82%AC%ED%95%AD"><span class="toc-number">1.7.</span> <span class="toc-text">한계사항과 제한사항</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Metadata"><span class="toc-number">1.8.</span> <span class="toc-text">Metadata</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sys-sql-modules"><span class="toc-number">1.8.1.</span> <span class="toc-text">sys.sql_modules</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sys-assembly-modules"><span class="toc-number">1.8.2.</span> <span class="toc-text">sys.assembly_modules</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sys-parameters"><span class="toc-number">1.8.3.</span> <span class="toc-text">sys.parameters</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sys-sql-expression-dependencies-sys-dm-sql-referenced-entities-sys-dm-sql-referencing-entities"><span class="toc-number">1.8.4.</span> <span class="toc-text">sys.sql_expression_dependencies, sys.dm_sql_referenced_entities, sys.dm_sql_referencing_entities</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Security"><span class="toc-number">1.9.</span> <span class="toc-text">Security</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Permissions"><span class="toc-number">1.9.1.</span> <span class="toc-text">Permissions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CREATE-PROCEDURE-and-Memory-Optimized-Tables"><span class="toc-number">1.10.</span> <span class="toc-text">CREATE PROCEDURE and Memory-Optimized Tables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Examples"><span class="toc-number">1.11.</span> <span class="toc-text">Examples</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Basic-Syntax"><span class="toc-number">1.11.1.</span> <span class="toc-text">Basic Syntax</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#A-%EA%B0%84%EB%8B%A8%ED%95%9C-Transact-SQL-%ED%94%84%EB%A1%9C-%EC%8B%9C%EC%A0%80-%EB%A7%8C%EB%93%A4%EA%B8%B0"><span class="toc-number">1.11.1.1.</span> <span class="toc-text">A. 간단한 Transact-SQL 프로 시저 만들기</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#B-%EB%91%98-%EC%9D%B4%EC%83%81%EC%9D%98-%EA%B2%B0%EA%B3%BC-%EC%A7%91%ED%95%A9-%EB%B0%98%ED%99%98"><span class="toc-number">1.11.1.2.</span> <span class="toc-text">B. 둘 이상의 결과 집합 반환</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#C-CLR-%EC%A0%80%EC%9E%A5-%ED%94%84%EB%A1%9C-%EC%8B%9C%EC%A0%80-%EB%A7%8C%EB%93%A4%EA%B8%B0"><span class="toc-number">1.11.1.3.</span> <span class="toc-text">C. CLR 저장 프로 시저 만들기</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EC%A0%84%EB%8B%AC-%EB%A7%A4%EA%B0%9C-%EB%B3%80%EC%88%98"><span class="toc-number">1.11.2.</span> <span class="toc-text">전달 매개 변수</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#D-%EC%9E%85%EB%A0%A5-%EB%A7%A4%EA%B0%9C-%EB%B3%80%EC%88%98%EB%A1%9C-%ED%94%84%EB%A1%9C-%EC%8B%9C%EC%A0%80-%EB%A7%8C%EB%93%A4%EA%B8%B0"><span class="toc-number">1.11.2.1.</span> <span class="toc-text">D. 입력 매개 변수로 프로 시저 만들기</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#E-%EC%99%80%EC%9D%BC%EB%93%9C-%EC%B9%B4%EB%93%9C-%EB%A7%A4%EA%B0%9C-%EB%B3%80%EC%88%98%EA%B0%80-%EC%9E%88%EB%8A%94-%ED%94%84%EB%A1%9C-%EC%8B%9C%EC%A0%80-%EC%82%AC%EC%9A%A9"><span class="toc-number">1.11.2.2.</span> <span class="toc-text">E. 와일드 카드 매개 변수가 있는 프로 시저 사용</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#F-OUTPUT-%EB%A7%A4%EA%B0%9C-%EB%B3%80%EC%88%98-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0"><span class="toc-number">1.11.2.3.</span> <span class="toc-text">F. OUTPUT 매개 변수 사용하기</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#G-%ED%85%8C%EC%9D%B4%EB%B8%94-%EB%B0%98%ED%99%98-%EB%A7%A4%EA%B0%9C-%EB%B3%80%EC%88%98-%EC%82%AC%EC%9A%A9"><span class="toc-number">1.11.2.4.</span> <span class="toc-text">G. 테이블 반환 매개 변수 사용</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#H-OUTPUT-%EC%BB%A4%EC%84%9C-%EB%A7%A4%EA%B0%9C-%EB%B3%80%EC%88%98-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0"><span class="toc-number">1.11.2.5.</span> <span class="toc-text">H. OUTPUT 커서 매개 변수 사용하기</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EC%A0%80%EC%9E%A5-%ED%94%84%EB%A1%9C-%EC%8B%9C%EC%A0%80%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%88%98%EC%A0%95"><span class="toc-number">1.11.3.</span> <span class="toc-text">저장 프로 시저를 사용하여 데이터 수정</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#I-%EC%A0%80%EC%9E%A5-%ED%94%84%EB%A1%9C-%EC%8B%9C%EC%A0%80%EC%97%90%EC%84%9C-UPDATE-%EC%82%AC%EC%9A%A9"><span class="toc-number">1.11.3.1.</span> <span class="toc-text">I. 저장 프로 시저에서 UPDATE 사용</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EC%98%A4%EB%A5%98-%EC%B2%98%EB%A6%AC"><span class="toc-number">1.11.4.</span> <span class="toc-text">오류 처리</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#J-TRY-%E2%80%A6-CATCH-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0"><span class="toc-number">1.11.4.1.</span> <span class="toc-text">J. TRY … CATCH 사용하기</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%ED%94%84%EB%A1%9C-%EC%8B%9C%EC%A0%80-%EC%A0%95%EC%9D%98-%EB%82%9C%EB%8F%85-%ED%99%94"><span class="toc-number">1.11.5.</span> <span class="toc-text">프로 시저 정의 난독 화</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#K-WITH-ENCRYPTION-%EC%98%B5%EC%85%98-%EC%82%AC%EC%9A%A9"><span class="toc-number">1.11.5.1.</span> <span class="toc-text">K. WITH ENCRYPTION 옵션 사용</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EA%B0%95%EC%A0%9C%EB%A1%9C-%ED%94%84%EB%A1%9C-%EC%8B%9C%EC%A0%80-%EC%9E%AC-%EC%BB%B4%ED%8C%8C%EC%9D%BC"><span class="toc-number">1.11.6.</span> <span class="toc-text">강제로 프로 시저 재 컴파일</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#L-WITH-RECOMPILE-%EC%98%B5%EC%85%98-%EC%82%AC%EC%9A%A9"><span class="toc-number">1.11.6.1.</span> <span class="toc-text">L. WITH RECOMPILE 옵션 사용</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EB%B3%B4%EC%95%88-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8-%EC%84%A4%EC%A0%95"><span class="toc-number">1.11.7.</span> <span class="toc-text">보안 컨텍스트 설정</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#EXECUTE-AS-%EC%A0%88-%EC%82%AC%EC%9A%A9"><span class="toc-number">1.11.7.1.</span> <span class="toc-text">EXECUTE AS 절 사용</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#N-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A7%80%EC%A0%95-%EA%B6%8C%ED%95%9C-%EC%A7%91%ED%95%A9-%EB%A7%8C%EB%93%A4%EA%B8%B0"><span class="toc-number">1.11.7.2.</span> <span class="toc-text">N. 사용자 지정 권한 집합 만들기</span></a></li></ol></li></ol></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#%EC%B0%B8%EC%A1%B0"><span class="toc-number"></span> <span class="toc-text">참조</span></a></li></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://avatars0.githubusercontent.com/u/4936005?s=400&amp;u=a679b941fe377418e7e4efcf916c6a636d7178ee&amp;v=4"></div><div class="author-info__name text-center">sejoung</div><div class="author-info__description text-center">잘정리하자</div><div class="follow-button"><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/sejoung">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="../../../archives"><span class="pull-left">Articles</span><span class="pull-right">658</span></a><a class="author-info-articles__tags article-meta" href="../../../tags"><span class="pull-left">Tags</span><span class="pull-right">727</span></a><a class="author-info-articles__categories article-meta" href="../../../categories"><span class="pull-left">Categories</span><span class="pull-right">64</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" target="_blank" rel="external nofollow noopener noreferrer" href="https://blog.naver.com/sanaes">naverblog</a><a class="author-info-links__name text-center" target="_blank" rel="external nofollow noopener noreferrer" href="https://www.linkedin.com/in/sanaes/">linkedin</a><a class="author-info-links__name text-center" target="_blank" rel="external nofollow noopener noreferrer" href="https://www.slideshare.net/sejoung">slideshare</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/Van_Gogh_-_Terrasse_des_Caf%C3%A9s_an_der_Place_du_Forum_in_Arles_am_Abend1.jpeg/1024px-Van_Gogh_-_Terrasse_des_Caf%C3%A9s_an_der_Place_du_Forum_in_Arles_am_Abend1.jpeg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="../../../index.html">폭간의 기술블로그</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">mssql CREATE PROCEDURE</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-05-31</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="../../../categories/sql/">sql</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2019/05/2019-05-31-mssql_create-procedure-transact-sql/"></span></a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="CREATE-PROCEDURE"><a href="#CREATE-PROCEDURE" class="headerlink" title="CREATE PROCEDURE"></a>CREATE PROCEDURE</h2><p>SQL Server, Azure SQL 데이터베이스, Azure SQL 데이터웨어 하우스 및 병렬 데이터웨어 하우스에 Transact-SQL 또는 CLR (공용 언어 런타임) 저장 프로 시저를 만듭니다.<br>저장 프로시 저는 다음과 같은 점에서 다른 프로그래밍 언어의 프로 시저와 유사합니다.</p>
<p>입력 매개 변수를 수락하고 출력 매개 변수 형태로 여러 값을 호출 프로 시저 또는 일괄 처리로 반환합니다.</p>
<p>다른 프로 시저 호출을 포함하여 데이터베이스에서 작업을 수행하는 프로그래밍 문을 포함합니다.</p>
<p>상태 값을 호출 프로 시저 또는 일괄 처리에 반환하여 성공 또는 실패 (및 실패 이유)를 나타냅니다.</p>
<p>이 문을 사용하여 현재 데이터베이스에서 영구 프로 시저를 만들거나 tempdb 데이터베이스 에서 임시 프로 시저를 만듭니다 .</p>
<h3 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-- Transact-SQL Syntax for Stored Procedures in SQL Server and Azure SQL Database  </span><br><span class="line">  </span><br><span class="line">CREATE [ OR ALTER ] &#123; PROC | PROCEDURE &#125; </span><br><span class="line">    [schema_name.] procedure_name [ ; number ]   </span><br><span class="line">    [ &#123; @parameter [ type_schema_name. ] data_type &#125;  </span><br><span class="line">        [ VARYING ] [ = default ] [ OUT | OUTPUT | [READONLY]  </span><br><span class="line">    ] [ ,...n ]   </span><br><span class="line">[ WITH &lt;procedure_option&gt; [ ,...n ] ]  </span><br><span class="line">[ FOR REPLICATION ]   </span><br><span class="line">AS &#123; [ BEGIN ] sql_statement [;] [ ...n ] [ END ] &#125;  </span><br><span class="line">[;]  </span><br><span class="line">  </span><br><span class="line">&lt;procedure_option&gt; ::=   </span><br><span class="line">    [ ENCRYPTION ]  </span><br><span class="line">    [ RECOMPILE ]  </span><br><span class="line">    [ EXECUTE AS Clause ]  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-- Transact-SQL Syntax for CLR Stored Procedures  </span><br><span class="line">  </span><br><span class="line">CREATE [ OR ALTER ] &#123; PROC | PROCEDURE &#125; </span><br><span class="line">    [schema_name.] procedure_name [ ; number ]   </span><br><span class="line">    [ &#123; @parameter [ type_schema_name. ] data_type &#125;   </span><br><span class="line">        [ = default ] [ OUT | OUTPUT ] [READONLY]  </span><br><span class="line">    ] [ ,...n ]   </span><br><span class="line">[ WITH EXECUTE AS Clause ]  </span><br><span class="line">AS &#123; EXTERNAL NAME assembly_name.class_name.method_name &#125;  </span><br><span class="line">[;]  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-- Transact-SQL Syntax for Natively Compiled Stored Procedures  </span><br><span class="line">  </span><br><span class="line">CREATE [ OR ALTER ] &#123; PROC | PROCEDURE &#125; [schema_name.] procedure_name  </span><br><span class="line">    [ &#123; @parameter data_type &#125; [ NULL | NOT NULL ] [ = default ] </span><br><span class="line">        [ OUT | OUTPUT ] [READONLY] </span><br><span class="line">    ] [ ,... n ]  </span><br><span class="line">  WITH NATIVE_COMPILATION, SCHEMABINDING [ , EXECUTE AS clause ]  </span><br><span class="line">AS  </span><br><span class="line">&#123;  </span><br><span class="line">  BEGIN ATOMIC WITH (set_option [ ,... n ] )  </span><br><span class="line">sql_statement [;] [ ... n ]  </span><br><span class="line"> [ END ]  </span><br><span class="line">&#125;  </span><br><span class="line"> [;]  </span><br><span class="line">  </span><br><span class="line">&lt;set_option&gt; ::=  </span><br><span class="line">    LANGUAGE =  [ N ] &#x27;language&#x27;  </span><br><span class="line">  | TRANSACTION ISOLATION LEVEL =  &#123; SNAPSHOT | REPEATABLE READ | SERIALIZABLE &#125;  </span><br><span class="line">  | [ DATEFIRST = number ]  </span><br><span class="line">  | [ DATEFORMAT = format ]  </span><br><span class="line">  | [ DELAYED_DURABILITY = &#123; OFF | ON &#125; ]  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-- Transact-SQL Syntax for Stored Procedures in Azure SQL Data Warehouse</span><br><span class="line">-- and Parallel Data Warehouse  </span><br><span class="line">  </span><br><span class="line">-- Create a stored procedure   </span><br><span class="line">CREATE &#123; PROC | PROCEDURE &#125; [ schema_name.] procedure_name  </span><br><span class="line">    [ &#123; @parameterdata_type &#125; [ OUT | OUTPUT ] ] [ ,...n ]  </span><br><span class="line">AS &#123; [ BEGIN ] sql_statement [;][ ,...n ] [ END ] &#125;  </span><br><span class="line">[;]  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Arguments"><a href="#Arguments" class="headerlink" title="Arguments"></a>Arguments</h3><h4 id="OR-ALTER"><a href="#OR-ALTER" class="headerlink" title="OR ALTER"></a>OR ALTER</h4><p>적용 대상 : Azure SQL 데이터베이스, SQL Server (SQL Server 2016 (13.x) SP1부터).</p>
<p>이미 존재하는 경우 프로 시저를 변경합니다.</p>
<h4 id="schema-name"><a href="#schema-name" class="headerlink" title="schema_name"></a>schema_name</h4><p>프로시저가 속하는 스키마의 이름. 프로 시저는 스키마 바운드입니다.<br>프로시저를 작성할 때 스키마 이름을 지정하지 않으면 프로 시저를 작성중인 사용자의 기본 스키마가 자동으로 지정됩니다.</p>
<h4 id="procedure-name"><a href="#procedure-name" class="headerlink" title="procedure_name"></a>procedure_name</h4><p>프로 시저 의 이름. 프로 시저 이름은 식별자에 대한 규칙을 따라야 하며 스키마 내에서 고유해야합니다.</p>
<p>프로 시저를 명명 할 때 sp_ 접두어를 사용하지 마십시오.<br>이 접두사는 SQL Server에서 시스템 프로 시저를 지정하는 데 사용됩니다.<br>접두사를 사용하면 같은 이름의 시스템 프로 시저가있는 경우 응용 프로그램 코드가 손상 될 수 있습니다.</p>
<p>로컬 임시 프로 시저의 경우 procedure_name ( #procedure_name ) 앞에 하나의 숫자 기호 (#)를 사용 하고 전역 임시 프로 시저 ( ## procedure_name )의 경우 두 개의 숫자 기호를 사용하여 로컬 또는 전역 임시 프로 시저를 만들 수 있습니다.<br>로컬 임시 프로시 저는 작성한 연결에만 표시되며 해당 연결이 닫히면 삭제됩니다.<br>전역 임시 프로시 저는 모든 연결에서 사용할 수 있으며 프로 시저를 사용하여 마지막 세션이 끝날 때 삭제됩니다.<br>임시 이름은 CLR 프로 시저에 지정할 수 없습니다.</p>
<p>‘##’을 포함한 프로 시저 또는 전역 임시 프로 시저의 전체 이름은 128자를 초과 할 수 없습니다.<br>‘#’을 포함한 로컬 임시 프로 시저의 전체 이름은 116자를 초과 할 수 없습니다.</p>
<h4 id="number"><a href="#number" class="headerlink" title="number"></a>number</h4><p>동일한 이름의 프로 시저를 그룹화하는 데 사용되는 선택적 정수.<br>이러한 그룹화 된 프로 시저는 하나의 DROP PROCEDURE 문을 사용하여 함께 삭제할 수 있습니다.</p>
<p>번호가 매겨진 프로 시저는 xml 또는 CLR 사용자 정의 형식을 사용할 수 없으며 계획 지침에서 사용할 수 없습니다.</p>
<h4 id="parameter"><a href="#parameter" class="headerlink" title="@ parameter"></a>@ parameter</h4><p>프로 시저에서 선언 된 매개 변수입니다.<br>@ 기호를 첫 번째 문자로 사용하여 매개 변수 이름을 지정하십시오.<br>매개 변수 이름은 식별자에 대한 규칙을 준수해야합니다.<br>매개 변수는 프로 시저에 대해 로컬입니다.<br>동일한 매개 변수 이름을 다른 프로 시저에서 사용할 수 있습니다.</p>
<p>하나 이상의 매개 변수를 선언 할 수 있습니다.<br>최대 값은 2,100입니다.<br>매개 변수의 기본값이 정의되거나 값이 다른 매개 변수와 같지 않으면 프로 시저가 호출 될 때 각 선언 된 매개 변수의 값을 사용자가 제공해야합니다.<br>프로 시저에 테이블 반환 매개 변수 가 포함되어 있고 매개 변수가 호출에서 누락 된 경우 빈 테이블이 전달됩니다.<br>매개 변수는 상수 식만 사용할 수 있습니다.<br>테이블 이름, 컬럼 이름 또는 다른 데이터베이스 오브젝트의 이름 대신 사용될 수 없습니다.<br>자세한 내용은 EXECUTE (Transact-SQL)를 참조하십시오 .</p>
<p>FOR REPLICATION이 지정되면 매개 변수를 선언 할 수 없습니다.</p>
<h5 id="type-schema-name-data-type"><a href="#type-schema-name-data-type" class="headerlink" title="[ type_schema_name . ] data_type"></a>[ type_schema_name . ] data_type</h5><p>데이터 유형이 속하는 매개 변수 및 스키마의 데이터 유형.</p>
<h5 id="Transact-SQL-프로-시저에-대한-지침"><a href="#Transact-SQL-프로-시저에-대한-지침" class="headerlink" title="Transact-SQL 프로 시저에 대한 지침"></a>Transact-SQL 프로 시저에 대한 지침</h5><ul>
<li><p>모든 Transact-SQL 데이터 형식은 매개 변수로 사용할 수 있습니다.</p>
</li>
<li><p>사용자 정의 테이블 형식을 사용하여 테이블 반환 매개 변수를 만들 수 있습니다.<br>테이블 반환 매개 변수는 INPUT 매개 변수 일 수 있으며 READONLY 키워드가 있어야합니다.<br>자세한 내용은 테이블 반환 매개 변수 사용 (데이터베이스 엔진)을 참조 하십시오.</p>
</li>
<li><p>cursor data types은 OUTPUT 매개 변수 일 수 있으며 VARYING 키워드가 수반되어야합니다.</p>
</li>
</ul>
<h5 id="CLR-절차-지침"><a href="#CLR-절차-지침" class="headerlink" title="CLR 절차 지침"></a>CLR 절차 지침</h5><ul>
<li><p>관리 코드에 해당하는 모든 원시 SQL Server 데이터 형식을 매개 변수로 사용할 수 있습니다.<br>CLR 형식과 SQL Server 시스템 데이터 형식 간의 통신에 대한 자세한 내용은 CLR 매개 변수 데이터 매핑을 참조하십시오.<br>SQL Server 시스템 데이터 형식 및 구문에 대한 자세한 내용은 데이터 형식 (Transact-SQL)을 참조하십시오.</p>
</li>
<li><p>테이블 값 또는 커서 데이터 형식은 매개 변수로 사용할 수 없습니다.</p>
</li>
<li><p>매개 변수의 데이터 형식이 CLR 사용자 정의 형식 인 경우 형식에 대한 EXECUTE 권한이 있어야합니다.</p>
</li>
</ul>
<h4 id="VARYING"><a href="#VARYING" class="headerlink" title="VARYING"></a>VARYING</h4><p>출력 매개 변수로서 지원되는 결과 세트를 지정합니다.<br>이 매개 변수는 프로 시저에 의해 동적으로 구성되며 내용은 다를 수 있습니다.<br>커서 매개 변수 에만 적용됩니다.<br>이 옵션은 CLR 프로 시저에 유효하지 않습니다.</p>
<h4 id="default"><a href="#default" class="headerlink" title="default"></a>default</h4><p>매개 변수의 기본값입니다.<br>매개 변수에 기본값이 정의되어 있으면 해당 매개 변수의 값을 지정하지 않고 프로 시저를 실행할 수 있습니다.<br>기본값은 상수이거나 NULL 일 수 있습니다.<br>상수 값은 와일드 카드 형식 일 수 있으므로 매개 변수를 프로 시저에 전달할 때 LIKE 키워드를 사용할 수 있습니다.</p>
<p>기본값은 CLR 프로 시저에 대해서만 sys.parameters.default 열에 기록됩니다.<br>이 열은 Transact-SQL 프로 시저 매개 변수의 경우 NULL입니다.</p>
<h4 id="OUT-OUTPUT"><a href="#OUT-OUTPUT" class="headerlink" title="OUT | OUTPUT"></a>OUT | OUTPUT</h4><p>매개 변수가 출력 매개 변수임을 나타냅니다.<br>OUTPUT 매개 변수를 사용하여 프로 시저의 호출자에게 값을 반환하십시오.<br>text , ntext 및 image 매개 변수는 프로 시저가 CLR 프로 시저가 아니면 OUTPUT 매개 변수로 사용할 수 없습니다.<br>프로 시저가 CLR 프로 시저가 아닌 경우 출력 매개 변수는 커서 자리 표시 자일 수 있습니다.<br>테이블 값 데이터 유형은 프로 시저의 OUTPUT 매개 변수로 지정할 수 없습니다.</p>
<h4 id="READONLY"><a href="#READONLY" class="headerlink" title="READONLY"></a>READONLY</h4><p>매개 변수가 프로 시저 본문 내에서 갱신되거나 수정 될 수 없음을 나타냅니다.<br>매개 변수 유형이 테이블 값 유형이면 READONLY를 지정해야합니다.</p>
<h4 id="RECOMPILE"><a href="#RECOMPILE" class="headerlink" title="RECOMPILE"></a>RECOMPILE</h4><p>데이터베이스 엔진이이 프로 시저에 대한 쿼리 계획을 캐시하지 않으며 실행될 때마다 컴파일되도록합니다.<br>재 컴파일을 강제하는 이유에 대한 자세한 내용 은 저장 프로 시저 재 컴파일을 참조하십시오.<br>FOR REPLICATION이 지정되거나 CLR 프로시 듀어에 대해이 옵션을 사용할 수 없습니다.</p>
<p>프로 시저 내의 개별 쿼리에 대한 쿼리 계획을 무시하도록 데이터베이스 엔진에 지시하려면 쿼리 정의에 RECOMPILE 쿼리 힌트를 사용합니다.<br>자세한 내용은 쿼리 힌트 (Transact-SQL)를 참조하십시오 .</p>
<h4 id="ENCRYPTION"><a href="#ENCRYPTION" class="headerlink" title="ENCRYPTION"></a>ENCRYPTION</h4><p>적용 대상 : SQL Server (SQL Server 2008에서 SQL Server 2017), Azure SQL 데이터베이스.</p>
<p>SQL Server가 CREATE PROCEDURE 문의 원래 텍스트를 난독 화 된 형식으로 변환 함을 나타냅니다.<br>난독 처리 결과는 SQL Server의 카탈로그 뷰에서 직접 볼 수 없습니다.<br>시스템 테이블 또는 데이터베이스 파일에 대한 액세스 권한이없는 사용자는 난독 화 된 텍스트를 검색 할 수 없습니다.<br>그러나 텍스트는 DAC 포트를 통해 시스템 테이블에 액세스하거나 데이터베이스 파일에 직접 액세스 할 수있는 권한있는 사용자가 사용할 수 있습니다.<br>또한 서버 프로세스에 디버거를 연결할 수있는 사용자는 런타임에 메모리에서 해독 된 프로 시저를 검색 할 수 있습니다.<br>시스템 메타 데이터에 액세스하는 방법에 대한 자세한 내용은 메타 데이터 표시 구성을 참조하십시오 .</p>
<p>이 옵션은 CLR 프로 시저에 유효하지 않습니다.</p>
<p>이 옵션으로 만든 프로시 저는 SQL Server 복제의 일부로 게시 할 수 없습니다.</p>
<h4 id="EXECUTE-AS-clause"><a href="#EXECUTE-AS-clause" class="headerlink" title="EXECUTE AS clause"></a>EXECUTE AS clause</h4><p>프로 시저를 실행할 보안 컨텍스트를 지정합니다.</p>
<p>네이티브 컴파일 된 저장 프로 시저의 경우 SQL Server 2016 (13.x) 및 Azure SQL 데이터베이스를 시작하면 EXECUTE AS 절에 대한 제한이 없습니다.<br>SQL Server 2014 (12.x)에서는 SELF, OWNER 및 ‘user_name’ 절이 기본적으로 컴파일 된 저장 프로 시저에서 지원됩니다.</p>
<p>자세한 내용은 EXECUTE AS 절 (Transact-SQL)을 참조하십시오 .</p>
<h4 id="FOR-REPLICATION"><a href="#FOR-REPLICATION" class="headerlink" title="FOR REPLICATION"></a>FOR REPLICATION</h4><p>적용 대상 : SQL Server (SQL Server 2008에서 SQL Server 2017), Azure SQL 데이터베이스.</p>
<p>프로 시저가 복제를 위해 작성되도록 지정합니다.<br>따라서 구독자에서 실행할 수 없습니다.<br>FOR REPLICATION 옵션으로 작성된 프로시 저는 프로 시저 필터로 사용되며 복제 중에 만 실행됩니다.<br>FOR REPLICATION이 지정되면 매개 변수를 선언 할 수 없습니다.<br>FOR REPLICATION은 CLR 프로 시저에 지정할 수 없습니다.<br>RECOLPILE 옵션은 FOR REPLICATION으로 작성된 프로 시저에 대해서는 무시됩니다.</p>
<p>FOR REPLICATION절차 개체 유형 갖는 RF 에서 는 sys.objects 및 sys.procedures를 .</p>
<h4 id="BEGIN-sql-statement-…-n-END"><a href="#BEGIN-sql-statement-…-n-END" class="headerlink" title="{[BEGIN] sql_statement [;] [… n ] [END]}"></a>{[BEGIN] sql_statement [;] [… n ] [END]}</h4><p>프로 시저 본문을 구성하는 하나 이상의 Transact-SQL 문입니다.<br>선택적 BEGIN 및 END 키워드를 사용하여 명령문을 묶을 수 있습니다.<br>자세한 내용은 모범 사례, 일반 설명 및 제한 및 제한 섹션을 참조하십시오.</p>
<p>외부 이름 assembly_name . class_name . method_name<br>적용 대상 : SQL Server 2008을 통해 SQL Server 2017, SQL 데이터베이스.</p>
<p>참조 할 CLR 프로 시저에 대한 .NET Framework 어셈블리의 메서드를 지정합니다.<br>class_name 은 유효한 SQL Server 식별자 여야하며 어셈블리의 클래스로 존재해야합니다.<br>클래스에 네임 스페이스 부분을 구분하기 위해 마침표 ( . )를 사용하는 네임 스페이스 한정 이름이 있으면 클래스 이름은 대괄호 ( [] ) 또는 따옴표 ( “” ) 를 사용하여 구분해야합니다.<br>지정된 메소드는 클래스의 정적 메소드 여야합니다.</p>
<p>기본적으로 SQL Server는 CLR 코드를 실행할 수 없습니다.<br>공용 언어 런타임 모듈을 참조하는 데이터베이스 개체를 작성, 수정 및 삭제할 수 있습니다.<br>그러나 clr enabled 옵션 을 활성화 할 때까지 SQL Server에서 이러한 참조를 실행할 수 없습니다.<br>이 옵션을 사용하려면 sp_configure 를 사용하십시오.</p>
<h4 id="ATOMIC-WITH"><a href="#ATOMIC-WITH" class="headerlink" title="ATOMIC WITH"></a>ATOMIC WITH</h4><p>적용 대상 : SQL Server 2014 (12.x)에서 SQL Server 2017 및 Azure SQL 데이터베이스.</p>
<p>원자 적 저장 프로 시저 실행을 나타냅니다.<br>변경 사항은 커밋되거나 예외를 throw하여 롤백 된 모든 변경 사항이 롤백됩니다.<br>ATOMIC WITH 블록은 네이티브 컴파일 스토어드 프로 시저에 필요합니다.</p>
<p>프로 시저가 RETURN (명시 적으로 RETURN 문을 통하거나 암시 적으로 실행 완료)되면 프로 시저가 수행 한 작업이 커밋됩니다.<br>프로 시저가 쓰루면 프로 시저가 수행 한 작업이 롤백됩니다.</p>
<p>XACT_ABORT는 기본적으로 원자 블록 내부에서 켜져 있으며 변경할 수 없습니다.<br>XACT_ABORT는 Transact-SQL 문이 런타임 오류를 발생시킬 때 SQL Server가 자동으로 현재 트랜잭션을 롤백할지 여부를 지정합니다.</p>
<p>다음 SET 옵션은 ATOMIC 블록에서 항상 ON입니다. 옵션을 변경할 수 없습니다.</p>
<ul>
<li>CONCAT_NULL_YIELDS_NULL</li>
<li>QUOTED_IDENTIFIER, ARITHABORT</li>
<li>NOCOUNT</li>
<li>ANSI_NULLS</li>
<li>ANSI_WARNINGS</li>
</ul>
<p>SET 옵션은 ATOMIC 블록 내에서 변경할 수 없습니다.<br>사용자 세션의 SET 옵션은 기본적으로 컴파일 된 저장 프로 시저의 범위에서 사용되지 않습니다.<br>이 옵션은 컴파일시 고정됩니다.</p>
<p>BEGIN, ROLLBACK 및 COMMIT 조작은 원자 블록 내에서 사용할 수 없습니다.</p>
<p>프로 시저의 외부 범위에서 원시 컴파일 된 저장 프로 시저 당 하나의 ATOMIC 블록이 있습니다.<br>블록은 중첩 될 수 없습니다.<br>원자 블록에 대한 자세한 내용은 원시 컴파일 된 저장 프로 시저를 참조하십시오.</p>
<h4 id="NULL-NOT-NULL"><a href="#NULL-NOT-NULL" class="headerlink" title="NULL | NOT NULL"></a>NULL | NOT NULL</h4><p>매개 변수에 널값이 허용되는지 여부를 판별합니다. NULL이 기본값입니다.</p>
<h4 id="NATIVE-COMPILATION"><a href="#NATIVE-COMPILATION" class="headerlink" title="NATIVE_COMPILATION"></a>NATIVE_COMPILATION</h4><p>적용 대상 : SQL Server 2014 (12.x)에서 SQL Server 2017 및 Azure SQL 데이터베이스.</p>
<p>프로 시저가 기본적으로 컴파일됨을 나타냅니다.<br>NATIVE_COMPILATION, SCHEMABINDING 및 EXECUTE AS는 임의의 순서로 지정할 수 있습니다.<br>자세한 내용은 원시 컴파일 된 저장 프로 시저를 참조하십시오 .</p>
<h4 id="SCHEMABINDING"><a href="#SCHEMABINDING" class="headerlink" title="SCHEMABINDING"></a>SCHEMABINDING</h4><p>적용 대상 : SQL Server 2014 (12.x)에서 SQL Server 2017 및 Azure SQL 데이터베이스.</p>
<p>프로 시저에서 참조하는 테이블을 삭제하거나 변경할 수 없도록합니다.<br>SCHEMABINDING은 기본적으로 컴파일 된 저장 프로 시저에 필요합니다.<br>자세한 내용은 기본적으로 컴파일 된 저장 프로 시저를 참조하십시오.<br>SCHEMABINDING 제약 조건은 사용자 정의 함수와 동일합니다.<br>자세한 내용은 CREATE FUNCTION (Transact-SQL) 의 SCHEMABINDING 섹션을 참조하십시오 .</p>
<h4 id="LANGUAGE-x3D-N-‘language’"><a href="#LANGUAGE-x3D-N-‘language’" class="headerlink" title="LANGUAGE &#x3D; [N] ‘language’"></a>LANGUAGE &#x3D; [N] ‘language’</h4><p>적용 대상 : SQL Server 2017 및 Azure SQL 데이터베이스를 통한 SQL Server 2014 (12.x).</p>
<p>상응하는 언어 설정 (Transact-SQL)를 참조하십시오 세션 옵션을 선택합니다. LANGUAGE &#x3D; [N] ‘언어’가 필요합니다.</p>
<h4 id="TRANSACTION-ISOLATION-LEVEL"><a href="#TRANSACTION-ISOLATION-LEVEL" class="headerlink" title="TRANSACTION ISOLATION LEVEL"></a>TRANSACTION ISOLATION LEVEL</h4><p>적용 대상 : SQL Server 2014 (12.x)에서 SQL Server 2017 및 Azure SQL 데이터베이스.</p>
<p>네이티브 컴파일 된 저장 프로 시저에 필요합니다. 저장 프로 시저에 대한 트랜잭션 격리 수준을 지정합니다.<br>옵션은 다음과 같습니다.</p>
<p>이러한 옵션에 대한 자세한 내용은 SET TRANSACTION ISOLATION LEVEL (Transact-SQL)을 참조하십시오 .</p>
<h4 id="REPEATABLE-READ"><a href="#REPEATABLE-READ" class="headerlink" title="REPEATABLE READ"></a>REPEATABLE READ</h4><p>다른 트랜잭션에 의해 수정되었지만 아직 커밋되지 않은 데이터를 명령문이 읽을 수 없도록 지정합니다.<br>다른 트랜잭션이 현재 트랜잭션이 읽은 데이터를 수정하면 현재 트랜잭션이 실패합니다.</p>
<h4 id="SERIALIZABLE"><a href="#SERIALIZABLE" class="headerlink" title="SERIALIZABLE"></a>SERIALIZABLE</h4><p>다음을 지정합니다.</p>
<ul>
<li><p>문은 수정되었지만 다른 트랜잭션에 의해 아직 커밋되지 않은 데이터는 읽을 수 없습니다.</p>
</li>
<li><p>다른 트랜잭션이 현재 트랜잭션이 읽은 데이터를 수정하면 현재 트랜잭션이 실패합니다.</p>
</li>
<li><p>다른 트랜잭션이 현재 트랜잭션의 명령문에서 읽은 키 범위에 속하는 키 값을 가진 새로운 행을 삽입하면 현재 트랜잭션이 실패합니다.</p>
</li>
</ul>
<h4 id="SNAPSHOT"><a href="#SNAPSHOT" class="headerlink" title="SNAPSHOT"></a>SNAPSHOT</h4><p>트랜잭션의 모든 명령문에서 읽은 데이터가 트랜잭션 시작시 존재하던 데이터의 트랜잭션 일관성 버전임을 지정합니다.</p>
<h4 id="DATEFIRST-x3D-number"><a href="#DATEFIRST-x3D-number" class="headerlink" title="DATEFIRST &#x3D; number"></a>DATEFIRST &#x3D; number</h4><p>적용 대상 : SQL Server 2014 (12.x)에서 SQL Server 2017 및 Azure SQL 데이터베이스.</p>
<p>주의 첫 번째 요일을 1에서 7 사이의 숫자로 지정합니다.<br>DATEFIRST는 선택 사항입니다.<br>지정하지 않으면 설정이 지정된 언어에서 유추됩니다.</p>
<p>자세한 내용은 SET DATEFIRST (Transact-SQL)를 참조하십시오.</p>
<h4 id="DATEFORMAT-x3D-format"><a href="#DATEFORMAT-x3D-format" class="headerlink" title="DATEFORMAT &#x3D; format"></a>DATEFORMAT &#x3D; format</h4><p>적용 대상 : SQL Server 2014 (12.x)에서 SQL Server 2017 및 Azure SQL 데이터베이스.</p>
<p>date, smalldatetime, datetime, datetime2 및 datetimeoffset 문자열을 해석하기위한 월, 일 및 년 날짜 부분의 순서를 지정합니다.<br>DATEFORMAT은 선택 사항입니다.<br>지정하지 않으면 설정이 지정된 언어에서 유추됩니다.</p>
<p>자세한 내용은 SET DATEFORMAT (Transact-SQL)를 참조하십시오 .</p>
<h4 id="DELAYED-DURABILITY-x3D-OFF-ON"><a href="#DELAYED-DURABILITY-x3D-OFF-ON" class="headerlink" title="DELAYED_DURABILITY &#x3D; {OFF | ON}"></a>DELAYED_DURABILITY &#x3D; {OFF | ON}</h4><p>적용 대상 : SQL Server 2014 (12.x)에서 SQL Server 2017 및 Azure SQL 데이터베이스.</p>
<p>SQL Server 트랜잭션 커밋은 완전히 내구성, 기본값 또는 지연된 내구성 중 하나 일 수 있습니다.</p>
<p>자세한 내용은 트랜잭션 내구성 제어를 참조하십시오 .</p>
<h3 id="Simple-Examples"><a href="#Simple-Examples" class="headerlink" title="Simple Examples"></a>Simple Examples</h3><p>시작하는 데 도움이되는 다음 두 가지 간단한 예제가<br><code>SELECT DB_NAME() AS ThisDB;</code> 있습니다. 현재 데이터베이스의 이름을 반환합니다.<br>다음과 같은 저장 프로 시저에서이 문을 래핑 할 수 있습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE PROC What_DB_is_this     </span><br><span class="line">AS   </span><br><span class="line">SELECT DB_NAME() AS ThisDB; </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>문을 사용하여 저장 프로 시저를 호출하십시오. <code>EXEC What_DB_is_this;</code></p>
<p>약간 더 복잡한 것은 입력 매개 변수를 제공하여 프로 시저의 유연성을 높이는 것입니다. 예 :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE PROC What_DB_is_that @ID int   </span><br><span class="line">AS    </span><br><span class="line">SELECT DB_NAME(@ID) AS ThatDB;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>프로 시저를 호출 할 때 데이터베이스 ID 번호를 제공하십시오.<br>예를 들어, <code>EXEC What_DB_is_that 2;</code> tempdb 반환합니다.</p>
<p>더 많은 예제를 보려면이 주제 끝에있는 예제 를 참조하십시오 .</p>
<h3 id="Best-Practices"><a href="#Best-Practices" class="headerlink" title="Best Practices"></a>Best Practices</h3><p>이것이 베스트 프랙티스의 철저한 목록은 아니지만, 이러한 제안은 프로 시저 성능을 향상시킬 수 있습니다.</p>
<ul>
<li><p>SET NOCOUNT ON 문을 프로 시저 본문의 첫 번째 문으로 사용하십시오.<br>즉, AS 키워드 바로 뒤에 배치하십시오.<br>이렇게하면 SELECT, INSERT, UPDATE, MERGE 및 DELETE 문이 실행 된 후 SQL Server에서 클라이언트로 다시 보내는 메시지가 해제됩니다.<br>데이터베이스 및 애플리케이션의 전반적인 성능은 이러한 불필요한 네트워크 오버 헤드를 제거함으로써 향상됩니다.<br>자세한 내용은 SET NOCOUNT (Transact-SQL)를 참조하십시오 .</p>
</li>
<li><p>프로 시저에서 데이터베이스 오브젝트를 작성하거나 참조 할 때 스키마 이름을 사용하십시오.<br>여러 스키마를 검색 할 필요가 없으면 데이터베이스 엔진에서 개체 이름을 확인하는 데 필요한 처리 시간이 줄어 듭니다.<br>또한 스키마를 지정하지 않고 오브젝트를 작성할 때 사용자의 기본 스키마가 지정되어 권한 및 액세스 문제점을 방지합니다.</p>
</li>
<li><p>WHERE 및 JOIN 절에 지정된 열을 중심으로 함수를 래핑하지 마십시오.<br>이렇게하면 열이 비 결정적이되어 쿼리 프로세서가 인덱스를 사용할 수 없게됩니다.</p>
</li>
<li><p>많은 행의 데이터를 리턴하는 SELECT.에서 scalar functions 을 사용하지 마십시오.<br>scalar functions 는 모든 행에 적용되어야하기 때문에 결과 행 기반 처리와 같으며 성능이 저하됩니다.</p>
</li>
<li><p>SELECT * 의 사용을 피하십시오.<br>대신 필수 열 이름을 지정하십시오.<br>이로 인해 프로 시저 실행을 중지시키는 일부 데이터베이스 엔진 오류를 방지 할 수 있습니다.<br>예를 들어, SELECT *12 열 테이블에서 데이터를 반환 한 다음 해당 데이터를 12 열 임시 테이블에 삽입 하는 문은 두 테이블의 열 번호 또는 순서가 변경 될 때까지 성공합니다.</p>
</li>
<li><p>너무 많은 데이터를 처리하거나 반환하지 마십시오.<br>프로 시저 코드에서 가능한 한 조기에 결과를 좁히므로 프로 시저가 수행하는 모든 후속 작업이 가능한 가장 작은 데이터 세트를 사용하여 수행됩니다.<br>필수 데이터 만 클라이언트 응용 프로그램에 보냅니다.<br>네트워크를 통해 추가 데이터를 보내고 불필요하게 큰 결과 세트를 통해 클라이언트 응용 프로그램을 강제 실행하는 것보다 효율적입니다.</p>
</li>
<li><p>BEGIN &#x2F; COMMIT TRANSACTION을 사용하여 명시 적 트랜잭션을 사용하고 가능한 한 트랜잭션을 짧게 유지하십시오.<br>트랜잭션이 길어질수록 레코드 잠금 시간이 길어지고 교착 상태가 발생할 가능성이 커집니다.</p>
</li>
<li><p>프로 시저 내부의 오류 처리에는 Transact-SQL TRY … CATCH 기능을 사용하십시오.<br>TRY … CATCH는 Transact-SQL 문의 전체 블록을 캡슐화 할 수 있습니다.<br>이렇게하면 성능 오버 헤드가 줄어들뿐만 아니라 프로그래밍이 크게 줄어들어 오류보고가 더욱 정확 해집니다.</p>
</li>
<li><p>프로 시저 본문의 CREATE TABLE 또는 ALTER TABLE Transact-SQL 문에서 참조하는 모든 테이블 열에 DEFAULT 키워드를 사용하십시오.<br>이렇게하면 NULL 값을 허용하지 않는 열에 NULL을 전달할 수 없습니다.</p>
</li>
<li><p>임시 테이블의 각 열에 NULL 또는 NOT NULL을 사용하십시오.<br>ANSI_DFLT_ON 및 ANSI_DFLT_OFF 옵션은 이러한 특성이 CREATE TABLE 또는 ALTER TABLE 문에 지정되지 않은 경우 데이터베이스 엔진이 NULL 또는 NOT NULL 특성을 열에 할당하는 방식을 제어합니다.<br>연결에서 프로 시저를 작성한 연결과 다른 옵션을 사용하여 프로 시저를 실행하는 경우 두 번째 연결에 대해 작성된 테이블의 열은 다른 널 (NULL) 입력 가능성을 가지며 다른 작동을 나타낼 수 있습니다.<br>NULL 또는 NOT NULL이 각 열에 명시 적으로 지정되면, 임시 테이블은 프로 시저를 실행하는 모든 연결에 동일한 널 (null) 가능성을 사용하여 작성됩니다.</p>
</li>
<li><p>널을 변환하는 수정 명령문을 사용하고 조회에서 널 값을 가진 행을 제거하는 논리를 포함하십시오.<br>Transact-SQL에서 NULL은 비어 있거나 “nothing”값이 아닙니다.<br>알 수없는 값에 대한 자리 표시 자이며 특히 결과 집합을 쿼리하거나 전체 함수를 사용할 때 예기치 않은 동작이 발생할 수 있습니다.</p>
</li>
<li><p>UNION 또는 OR 연산자 대신 UNION ALL 연산자를 사용하십시오 (별개의 값에 대한 특정 필요가없는 경우).<br>UNION ALL 연산자는 결과 집합에서 중복이 필터링되지 않으므로 처리 오버 헤드가 적습니다.</p>
</li>
</ul>
<h3 id="General-Remarks"><a href="#General-Remarks" class="headerlink" title="General Remarks"></a>General Remarks</h3><p>프로 시저의 미리 정의 된 최대 크기는 없습니다.</p>
<p>프로 시저에 지정된 변수는 @@ SPID와 같은 사용자 정의 또는 시스템 변수 일 수 있습니다.</p>
<p>프로시 듀어가 처음 실행될 때, 프로시저가 컴파일되어 데이터를 검색하기위한 최적의 액세스 플랜을 결정합니다.<br>이후의 프로 시저 실행은 데이터베이스 엔진의 계획 캐시에 여전히 남아있는 경우 이미 생성 된 계획을 다시 사용할 수 있습니다.</p>
<p>SQL Server가 시작될 때 하나 이상의 프로 시저가 자동으로 실행될 수 있습니다.<br>프로 시저는 master 데이터베이스 의 시스템 관리자가 만들고 sysadmin 고정 서버 역할에서 백그라운드 프로세스로 실행해야합니다.<br>프로시저는 입력 또는 출력 매개 변수를 가질 수 없습니다.<br>자세한 내용 은 저장 프로 시저 실행을 참조하십시오 .</p>
<p>프로 시저가 다른 프로 시저를 호출하거나 CLR 루틴, 형식 또는 집계를 참조하여 관리되는 코드를 실행할 때 프로 시저가 중첩됩니다.<br>프로 시저 및 관리 코드 참조는 최대 32 개의 수준으로 중첩 될 수 있습니다.<br>호출 된 프로 시저 또는 관리되는 코드 참조가 실행을 시작하면 중첩 수준이 1 씩 증가하고 호출 된 프로 시저 또는 관리되는 코드 참조가 실행을 완료하면 중첩 수준이 1 씩 감소합니다.<br>관리 코드 내에서 호출 된 메서드는 중첩 수준 제한에 포함되지 않습니다.<br>그러나 CLR 저장 프로 시저가 SQL Server 관리 공급자를 통해 데이터 액세스 작업을 수행하면 관리 코드에서 SQL로 전환 할 때 추가 중첩 수준이 추가됩니다.</p>
<p>최대 중첩 수준을 초과하면 전체 호출 체인이 실패합니다. @@ NESTLEVEL 함수를 사용하여 현재 저장 프로 시저 실행의 중첩 수준을 반환 할 수 있습니다.</p>
<h3 id="Interoperability"><a href="#Interoperability" class="headerlink" title="Interoperability"></a>Interoperability</h3><p>데이터베이스 엔진은 Transact-SQL 프로 시저를 만들거나 수정할 때 SET QUOTED_IDENTIFIER 및 SET ANSI_NULLS 설정을 저장합니다.<br>이러한 원래 설정은 프로 시저가 실행될 때 사용됩니다.<br>따라서 프로 시저가 실행 중일 때 SET QUOTED_IDENTIFIER 및 SET ANSI_NULLS에 대한 클라이언트 세션 설정은 무시됩니다.</p>
<p>프로 시저를 만들거나 수정할 때 SET ARITHABORT, SET ANSI_WARNINGS 또는 SET ANSI_PADDINGS와 같은 다른 SET 옵션은 저장되지 않습니다.<br>프로 시저의 논리가 특정 설정에 따라 다르면 적절한 설정을 보장하기 위해 프로 시저 시작시 SET 문을 포함하십시오.<br>프로 시저에서 SET 문을 실행하면 프로 시저가 실행을 마칠 때까지 설정이 적용됩니다.<br>그런 다음 설정은 호출 될 때 프로 시저의 값으로 복원됩니다.<br>이렇게하면 개별 클라이언트가 프로 시저의 논리에 영향을주지 않고 원하는 옵션을 설정할 수 있습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET ANSI_WARNINGS는 프로 시저, 사용자 정의 함수 또는 일괄 처리 문에서 변수를 선언하고 설정할 때 매개 변수를 전달할 때 적용되지 않습니다. </span><br><span class="line">예를 들어, 변수가 char (3) 으로 정의 된 다음 세 문자보다 큰 값으로 설정된 경우 데이터는 정의 된 크기로 잘리고 INSERT 또는 UPDATE 문은 성공합니다.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="한계사항과-제한사항"><a href="#한계사항과-제한사항" class="headerlink" title="한계사항과 제한사항"></a>한계사항과 제한사항</h3><p>CREATE PROCEDURE 문은 단일 일괄 처리의 다른 Transact-SQL 문과 결합 될 수 없습니다.</p>
<p>다음 문은 저장 프로 시저의 본문 어디에서나 사용할 수 없습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE AGGREGATE	CREATE SCHEMA	SET SHOWPLAN_TEXT</span><br><span class="line">CREATE DEFAULT	CREATE or ALTER TRIGGER	SET SHOWPLAN_XML</span><br><span class="line">CREATE or ALTER FUNCTION	CREATE or ALTER VIEW	USE database_name</span><br><span class="line">CREATE or ALTER PROCEDURE	SET PARSEONLY	</span><br><span class="line">CREATE RULE	SET SHOWPLAN_ALL</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>프로시 저는 아직 존재하지 않는 테이블을 참조 할 수 있습니다.<br>작성시 구문 확인 만 수행됩니다.<br>프로 시저가 처음 실행될 때까지 컴파일되지 않습니다.<br>컴파일 중에 만 프로 시저에서 참조 된 모든 객체가 해석됩니다.<br>따라서 존재하지 않는 테이블을 참조하는 구문 적으로 올바른 프로 시저를 성공적으로 작성할 수 있습니다.<br>그러나 참조 된 테이블이 존재하지 않으면 프로 시저가 실행 시간에 실패합니다.</p>
<p>함수 이름을 매개 변수 기본값으로 지정하거나 프로 시저를 실행할 때 매개 변수에 전달 된 값으로 지정할 수 없습니다.<br>그러나 다음 예제와 같이 함수를 변수로 전달할 수 있습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-- Passing the function value as a variable.  </span><br><span class="line">DECLARE @CheckDate datetime = GETDATE();  </span><br><span class="line">EXEC dbo.uspGetWhereUsedProductID 819, @CheckDate;   </span><br><span class="line">GO  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>SQL Server의 원격 인스턴스에서 프로 시저가 변경되면 변경 내용을 롤백 할 수 없습니다. 원격 프로 시저는 트랜잭션에 참여하지 않습니다.</p>
<p>데이터베이스 엔진이 .NET Framework에서 오버로드 될 때 올바른 메서드를 참조하려면 EXTERNAL NAME 절에 지정된 메서드의 특성이 다음과 같아야합니다.</p>
<ul>
<li><p>정적 메소드로 선언하십시오.</p>
</li>
<li><p>프로 시저의 매개 변수 수와 동일한 수의 매개 변수를받습니다.</p>
</li>
<li><p>SQL Server 프로 시저의 해당 매개 변수의 데이터 형식과 호환되는 매개 변수 형식을 사용하십시오.<br>SQL Server 데이터 형식을 .NET Framework 데이터 형식과 일치시키는 방법에 대한 자세한 내용은 CLR 매개 변수 데이터 매핑을 참조하십시오 .</p>
</li>
</ul>
<h3 id="Metadata"><a href="#Metadata" class="headerlink" title="Metadata"></a>Metadata</h3><p>다음은 저장 프로 시저에 대한 정보를 반환하는 데 사용할 수있는 카탈로그 뷰 및 동적 관리 뷰를 나열합니다.</p>
<h4 id="sys-sql-modules"><a href="#sys-sql-modules" class="headerlink" title="sys.sql_modules"></a>sys.sql_modules</h4><p>Transact-SQL 프로 시저의 정의를 반환합니다.<br>ENCRYPTION 옵션으로 작성된 프로 시저의 텍스트는 sys.sql_modules 카탈로그 뷰를 사용하여 볼 수 없습니다 .</p>
<h4 id="sys-assembly-modules"><a href="#sys-assembly-modules" class="headerlink" title="sys.assembly_modules"></a>sys.assembly_modules</h4><p>CLR 프로 시저에 대한 정보를 반환합니다.</p>
<h4 id="sys-parameters"><a href="#sys-parameters" class="headerlink" title="sys.parameters"></a>sys.parameters</h4><p>프로 시저에 정의 된 매개 변수에 대한 정보를 반환합니다.</p>
<h4 id="sys-sql-expression-dependencies-sys-dm-sql-referenced-entities-sys-dm-sql-referencing-entities"><a href="#sys-sql-expression-dependencies-sys-dm-sql-referenced-entities-sys-dm-sql-referencing-entities" class="headerlink" title="sys.sql_expression_dependencies, sys.dm_sql_referenced_entities, sys.dm_sql_referencing_entities"></a>sys.sql_expression_dependencies, sys.dm_sql_referenced_entities, sys.dm_sql_referencing_entities</h4><p>프로 시저에서 참조하는 객체를 반환합니다.</p>
<p>컴파일 된 프로 시저의 크기를 예측하려면 다음 성능 모니터 카운터를 사용하십시오.</p>
<ul>
<li>SQLServer: Plan Cache Object	</li>
<li>Cache Hit Ratio</li>
<li>Cache Pages</li>
<li>Cache Object Counts*</li>
</ul>
<p>*이 카운터는 Ad Hoc Transact-SQL, 준비된 Transact-SQL, 프로 시저, 트리거 등을 비롯한 다양한 캐시 개체 범주에 사용할 수 있습니다.<br>자세한 내용은 SQL Server, 캐시 개체 계획을 참조하십시오 .</p>
<h3 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h3><h4 id="Permissions"><a href="#Permissions" class="headerlink" title="Permissions"></a>Permissions</h4><p>필요 절차의 CREATE 데이터베이스에 권한 및 ALTER 프로 시저가 생성, 또는 회원 자격 요구되고있는 스키마에 대한 권한이 있는 db_ddladmin 고정 데이터베이스 역할을.</p>
<p>CLR 저장 프로 시저의 경우 EXTERNAL NAME 절에서 참조 된 어셈블리의 소유권 또는 해당 어셈블리에 대한 REFERENCES 권한이 필요합니다.</p>
<h3 id="CREATE-PROCEDURE-and-Memory-Optimized-Tables"><a href="#CREATE-PROCEDURE-and-Memory-Optimized-Tables" class="headerlink" title="CREATE PROCEDURE and Memory-Optimized Tables"></a>CREATE PROCEDURE and Memory-Optimized Tables</h3><p>메모리 최적화 테이블은 기존 및 원시 컴파일 된 저장 프로 시저를 통해 액세스 할 수 있습니다.<br>기본 프로 시저가 대부분의 경우보다 효율적인 방법입니다.<br>자세한 내용은 원시 컴파일 된 저장 프로 시저를 참조하십시오 .</p>
<p>다음 예제는 메모리 최적화 테이블에 액세스하는 네이티브 컴파일 된 저장 프로 시저를 만드는 방법을 보여줍니다 dbo.Departments.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE PROCEDURE dbo.usp_add_kitchen @dept_id int, @kitchen_count int NOT NULL  </span><br><span class="line">WITH EXECUTE AS OWNER, SCHEMABINDING, NATIVE_COMPILATION  </span><br><span class="line">AS  </span><br><span class="line">BEGIN ATOMIC WITH (TRANSACTION ISOLATION LEVEL = SNAPSHOT, LANGUAGE = N&#x27;us_english&#x27;)  </span><br><span class="line">  </span><br><span class="line">  UPDATE dbo.Departments  </span><br><span class="line">  SET kitchen_count = ISNULL(kitchen_count, 0) + @kitchen_count  </span><br><span class="line">  WHERE id = @dept_id  </span><br><span class="line">END;  </span><br><span class="line">GO  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>NATIVE_COMPILATION없이 작성된 프로시 저는 원시 컴파일 된 스토어드 프로 시저로 변경 될 수 없습니다.</p>
<p>기본적으로 컴파일 된 저장 프로 시저, 지원되는 쿼리 표면 영역 및 연산자에 대한 프로그래밍 기능에 대한 설명은 원시 컴파일 된 T-SQL 모듈에 지원되는 기능을 참조하십시오 .</p>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><h4 id="Basic-Syntax"><a href="#Basic-Syntax" class="headerlink" title="Basic Syntax"></a>Basic Syntax</h4><p>이 절의 예는 최소한의 필수 구문을 사용하는 CREATE PROCEDURE.의 기본 기능을 보여줍니다.</p>
<h5 id="A-간단한-Transact-SQL-프로-시저-만들기"><a href="#A-간단한-Transact-SQL-프로-시저-만들기" class="headerlink" title="A. 간단한 Transact-SQL 프로 시저 만들기"></a>A. 간단한 Transact-SQL 프로 시저 만들기</h5><p>다음 예에서는 AdventureWorks2012 데이터베이스의보기에서 모든 직원 (제공 한 성과 성), 직책 및 부서 이름을 반환하는 저장 프로 시저를 만듭니다.<br>이 절차는 매개 변수를 사용하지 않습니다.<br>그런 다음 예제에서는 프로 시저를 실행하는 세 가지 방법을 보여줍니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE PROCEDURE HumanResources.uspGetAllEmployees  </span><br><span class="line">AS  </span><br><span class="line">    SET NOCOUNT ON;  </span><br><span class="line">    SELECT LastName, FirstName, JobTitle, Department  </span><br><span class="line">    FROM HumanResources.vEmployeeDepartment;  </span><br><span class="line">GO  </span><br><span class="line">  </span><br><span class="line">SELECT * FROM HumanResources.vEmployeeDepartment;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>uspGetEmployees절차는 다음과 같은 방법으로 실행할 수 있습니다 :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">EXECUTE HumanResources.uspGetAllEmployees;  </span><br><span class="line">GO  </span><br><span class="line">-- Or  </span><br><span class="line">EXEC HumanResources.uspGetAllEmployees;  </span><br><span class="line">GO  </span><br><span class="line">-- Or, if this procedure is the first statement within a batch:  </span><br><span class="line">HumanResources.uspGetAllEmployees;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="B-둘-이상의-결과-집합-반환"><a href="#B-둘-이상의-결과-집합-반환" class="headerlink" title="B. 둘 이상의 결과 집합 반환"></a>B. 둘 이상의 결과 집합 반환</h5><p>다음 프로시 저는 두 개의 결과 세트를 리턴합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE PROCEDURE dbo.uspMultipleResults   </span><br><span class="line">AS  </span><br><span class="line">SELECT TOP(10) BusinessEntityID, Lastname, FirstName FROM Person.Person;  </span><br><span class="line">SELECT TOP(10) CustomerID, AccountNumber FROM Sales.Customer;  </span><br><span class="line">GO  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="C-CLR-저장-프로-시저-만들기"><a href="#C-CLR-저장-프로-시저-만들기" class="headerlink" title="C. CLR 저장 프로 시저 만들기"></a>C. CLR 저장 프로 시저 만들기</h5><p>다음 예제에서는 어셈블리 에서 클래스 GetPhotoFromDB의 GetPhotoFromDB메서드 를 참조 하는 프로 시저를 만듭니다 .<br>프로 시저를 만들기 전에 어셈블리가 로컬 데이터베이스에 등록됩니다.LargeObjectBinaryHandlingLOBUsingCLRHandlingLOBUsingCLR</p>
<p>적용 대상 : SQL Server 2008에서 SQL Server 2017, SQL 데이터베이스 (assembly_bits에서 생성 된 어셈블리를 사용하는 경우)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE ASSEMBLY HandlingLOBUsingCLR  </span><br><span class="line">FROM &#x27;\\MachineName\HandlingLOBUsingCLR\bin\Debug\HandlingLOBUsingCLR.dll&#x27;;  </span><br><span class="line">GO  </span><br><span class="line">CREATE PROCEDURE dbo.GetPhotoFromDB  </span><br><span class="line">(  </span><br><span class="line">    @ProductPhotoID int,  </span><br><span class="line">    @CurrentDirectory nvarchar(1024),  </span><br><span class="line">    @FileName nvarchar(1024)  </span><br><span class="line">)  </span><br><span class="line">AS EXTERNAL NAME HandlingLOBUsingCLR.LargeObjectBinary.GetPhotoFromDB;  </span><br><span class="line">GO  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="전달-매개-변수"><a href="#전달-매개-변수" class="headerlink" title="전달 매개 변수"></a>전달 매개 변수</h4><p>이 절의 예제는 입력 및 출력 매개 변수를 사용하여 저장 프로 시저간에 값을 전달하는 방법을 보여줍니다.</p>
<h5 id="D-입력-매개-변수로-프로-시저-만들기"><a href="#D-입력-매개-변수로-프로-시저-만들기" class="headerlink" title="D. 입력 매개 변수로 프로 시저 만들기"></a>D. 입력 매개 변수로 프로 시저 만들기</h5><p>다음 예제에서는 직원의 이름과성에 대한 값을 전달하여 특정 직원에 대한 정보를 반환하는 저장 프로 시저를 만듭니다.<br>이 프로시저는 전달 된 매개 변수와 정확히 일치하는 항목 만 허용합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">IF OBJECT_ID ( &#x27;HumanResources.uspGetEmployees&#x27;, &#x27;P&#x27; ) IS NOT NULL   </span><br><span class="line">    DROP PROCEDURE HumanResources.uspGetEmployees;  </span><br><span class="line">GO  </span><br><span class="line">CREATE PROCEDURE HumanResources.uspGetEmployees   </span><br><span class="line">    @LastName nvarchar(50),   </span><br><span class="line">    @FirstName nvarchar(50)   </span><br><span class="line">AS   </span><br><span class="line">  </span><br><span class="line">    SET NOCOUNT ON;  </span><br><span class="line">    SELECT FirstName, LastName, JobTitle, Department  </span><br><span class="line">    FROM HumanResources.vEmployeeDepartment  </span><br><span class="line">    WHERE FirstName = @FirstName AND LastName = @LastName;  </span><br><span class="line">GO  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>uspGetEmployees절차는 다음과 같은 방법으로 실행할 수 있습니다 :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">EXECUTE HumanResources.uspGetEmployees N&#x27;Ackerman&#x27;, N&#x27;Pilar&#x27;;  </span><br><span class="line">-- Or  </span><br><span class="line">EXEC HumanResources.uspGetEmployees @LastName = N&#x27;Ackerman&#x27;, @FirstName = N&#x27;Pilar&#x27;;  </span><br><span class="line">GO  </span><br><span class="line">-- Or  </span><br><span class="line">EXECUTE HumanResources.uspGetEmployees @FirstName = N&#x27;Pilar&#x27;, @LastName = N&#x27;Ackerman&#x27;;  </span><br><span class="line">GO  </span><br><span class="line">-- Or, if this procedure is the first statement within a batch:  </span><br><span class="line">HumanResources.uspGetEmployees N&#x27;Ackerman&#x27;, N&#x27;Pilar&#x27;;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="E-와일드-카드-매개-변수가-있는-프로-시저-사용"><a href="#E-와일드-카드-매개-변수가-있는-프로-시저-사용" class="headerlink" title="E. 와일드 카드 매개 변수가 있는 프로 시저 사용"></a>E. 와일드 카드 매개 변수가 있는 프로 시저 사용</h5><p>다음 예제에서는 직원의 이름과성에 대한 전체 또는 부분 값을 전달하여 직원에 대한 정보를 반환하는 저장 프로 시저를 만듭니다.<br>이 프로 시저 패턴은 전달 된 매개 변수와 일치하거나 제공되지 않을 경우 미리 설정된 기본값 (문자로 시작하는 성 D)을 사용합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">IF OBJECT_ID ( &#x27;HumanResources.uspGetEmployees2&#x27;, &#x27;P&#x27; ) IS NOT NULL   </span><br><span class="line">    DROP PROCEDURE HumanResources.uspGetEmployees2;  </span><br><span class="line">GO  </span><br><span class="line">CREATE PROCEDURE HumanResources.uspGetEmployees2   </span><br><span class="line">    @LastName nvarchar(50) = N&#x27;D%&#x27;,   </span><br><span class="line">    @FirstName nvarchar(50) = N&#x27;%&#x27;  </span><br><span class="line">AS   </span><br><span class="line">    SET NOCOUNT ON;  </span><br><span class="line">    SELECT FirstName, LastName, JobTitle, Department  </span><br><span class="line">    FROM HumanResources.vEmployeeDepartment  </span><br><span class="line">    WHERE FirstName LIKE @FirstName AND LastName LIKE @LastName;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>uspGetEmployees2절차는 여러 조합으로 실행할 수 있습니다. 가능한 조합은 여기에 나와 있습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">EXECUTE HumanResources.uspGetEmployees2;  </span><br><span class="line">-- Or  </span><br><span class="line">EXECUTE HumanResources.uspGetEmployees2 N&#x27;Wi%&#x27;;  </span><br><span class="line">-- Or  </span><br><span class="line">EXECUTE HumanResources.uspGetEmployees2 @FirstName = N&#x27;%&#x27;;  </span><br><span class="line">-- Or  </span><br><span class="line">EXECUTE HumanResources.uspGetEmployees2 N&#x27;[CK]ars[OE]n&#x27;;  </span><br><span class="line">-- Or  </span><br><span class="line">EXECUTE HumanResources.uspGetEmployees2 N&#x27;Hesse&#x27;, N&#x27;Stefen&#x27;;  </span><br><span class="line">-- Or  </span><br><span class="line">EXECUTE HumanResources.uspGetEmployees2 N&#x27;H%&#x27;, N&#x27;S%&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="F-OUTPUT-매개-변수-사용하기"><a href="#F-OUTPUT-매개-변수-사용하기" class="headerlink" title="F. OUTPUT 매개 변수 사용하기"></a>F. OUTPUT 매개 변수 사용하기</h5><p>다음 예제에서는 uspGetList프로 시저 를 만듭니다 .<br>이 절차는 지정된 금액을 초과하지 않는 가격을 가진 제품 목록을 반환합니다.<br>이 예에서는 여러 SELECT문 및 여러 OUTPUT매개 변수를 사용하는 방법을 보여줍니다 .<br>OUTPUT 매개 변수를 사용하면 외부 프로 시저, 일괄 처리 또는 둘 이상의 Transact-SQL 문을 사용하여 프로 시저를 실행하는 동안 설정된 값에 액세스 할 수 있습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">IF OBJECT_ID ( &#x27;Production.uspGetList&#x27;, &#x27;P&#x27; ) IS NOT NULL   </span><br><span class="line">    DROP PROCEDURE Production.uspGetList;  </span><br><span class="line">GO  </span><br><span class="line">CREATE PROCEDURE Production.uspGetList @Product varchar(40)   </span><br><span class="line">    , @MaxPrice money   </span><br><span class="line">    , @ComparePrice money OUTPUT  </span><br><span class="line">    , @ListPrice money OUT  </span><br><span class="line">AS  </span><br><span class="line">    SET NOCOUNT ON;  </span><br><span class="line">    SELECT p.[Name] AS Product, p.ListPrice AS &#x27;List Price&#x27;  </span><br><span class="line">    FROM Production.Product AS p  </span><br><span class="line">    JOIN Production.ProductSubcategory AS s   </span><br><span class="line">      ON p.ProductSubcategoryID = s.ProductSubcategoryID  </span><br><span class="line">    WHERE s.[Name] LIKE @Product AND p.ListPrice &lt; @MaxPrice;  </span><br><span class="line">-- Populate the output variable @ListPprice.  </span><br><span class="line">SET @ListPrice = (SELECT MAX(p.ListPrice)  </span><br><span class="line">        FROM Production.Product AS p  </span><br><span class="line">        JOIN  Production.ProductSubcategory AS s   </span><br><span class="line">          ON p.ProductSubcategoryID = s.ProductSubcategoryID  </span><br><span class="line">        WHERE s.[Name] LIKE @Product AND p.ListPrice &lt; @MaxPrice);  </span><br><span class="line">-- Populate the output variable @compareprice.  </span><br><span class="line">SET @ComparePrice = @MaxPrice;  </span><br><span class="line">GO  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>uspGetList비용보다 적은 Adventure Works 제품 (자전거) 목록을 반환 하려면 실행하십시오 $700.<br>OUTPUT매개 변수 @Cost및 @ComparePrices에 메시지를 반환하는 흐름 제어 언어와 함께 사용되는 메시지 창.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">OUTPUT 변수는 프로 시저가 생성 될 때 및 변수가 사용될 때 정의되어야합니다. </span><br><span class="line">매개 변수 이름과 변수 이름이 일치 할 필요는 없습니다. </span><br><span class="line">데이터 유형 및 파라미터 위치가 일치해야 @ListPrice= 변수가 사용된다.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">DECLARE @ComparePrice money, @Cost money ;  </span><br><span class="line">EXECUTE Production.uspGetList &#x27;%Bikes%&#x27;, 700,   </span><br><span class="line">    @ComparePrice OUT,   </span><br><span class="line">    @Cost OUTPUT  </span><br><span class="line">IF @Cost &lt;= @ComparePrice   </span><br><span class="line">BEGIN  </span><br><span class="line">    PRINT &#x27;These products can be purchased for less than   </span><br><span class="line">    $&#x27;+RTRIM(CAST(@ComparePrice AS varchar(20)))+&#x27;.&#x27;  </span><br><span class="line">END  </span><br><span class="line">ELSE  </span><br><span class="line">    PRINT &#x27;The prices for all products in this category exceed   </span><br><span class="line">    $&#x27;+ RTRIM(CAST(@ComparePrice AS varchar(20)))+&#x27;.&#x27;;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>다음은 부분 결과 집합입니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Product                     List Price  </span><br><span class="line">--------------------------  ----------  </span><br><span class="line">Road-750 Black, 58          539.99  </span><br><span class="line">Mountain-500 Silver, 40     564.99  </span><br><span class="line">Mountain-500 Silver, 42     564.99  </span><br><span class="line">...  </span><br><span class="line">Road-750 Black, 48          539.99  </span><br><span class="line">Road-750 Black, 52          539.99  </span><br><span class="line">  </span><br><span class="line">(14 row(s) affected)   </span><br><span class="line"> </span><br><span class="line">These items can be purchased for less than $700.00.</span><br></pre></td></tr></table></figure>

<h5 id="G-테이블-반환-매개-변수-사용"><a href="#G-테이블-반환-매개-변수-사용" class="headerlink" title="G. 테이블 반환 매개 변수 사용"></a>G. 테이블 반환 매개 변수 사용</h5><p>다음 예제에서는 테이블 반환 매개 변수 형식을 사용하여 여러 행을 테이블에 삽입합니다.<br>이 예제에서는 매개 변수 유형을 만들고, 테이블 변수를 참조하도록 선언하고, 매개 변수 목록을 채운 다음 값을 저장 프로 시저에 전달합니다.<br>저장 프로시 저는 값을 사용하여 테이블에 여러 행을 삽입합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/* Create a table type. */  </span><br><span class="line">CREATE TYPE LocationTableType AS TABLE   </span><br><span class="line">( LocationName VARCHAR(50)  </span><br><span class="line">, CostRate INT );  </span><br><span class="line">GO  </span><br><span class="line">  </span><br><span class="line">/* Create a procedure to receive data for the table-valued parameter. */  </span><br><span class="line">CREATE PROCEDURE usp_InsertProductionLocation  </span><br><span class="line">    @TVP LocationTableType READONLY  </span><br><span class="line">    AS   </span><br><span class="line">    SET NOCOUNT ON  </span><br><span class="line">    INSERT INTO [AdventureWorks2012].[Production].[Location]  </span><br><span class="line">           ([Name]  </span><br><span class="line">           ,[CostRate]  </span><br><span class="line">           ,[Availability]  </span><br><span class="line">           ,[ModifiedDate])  </span><br><span class="line">        SELECT *, 0, GETDATE()  </span><br><span class="line">        FROM  @TVP;  </span><br><span class="line">GO  </span><br><span class="line">  </span><br><span class="line">/* Declare a variable that references the type. */  </span><br><span class="line">DECLARE @LocationTVP   </span><br><span class="line">AS LocationTableType;  </span><br><span class="line">  </span><br><span class="line">/* Add data to the table variable. */  </span><br><span class="line">INSERT INTO @LocationTVP (LocationName, CostRate)  </span><br><span class="line">    SELECT [Name], 0.00  </span><br><span class="line">    FROM   </span><br><span class="line">    [AdventureWorks2012].[Person].[StateProvince];  </span><br><span class="line">  </span><br><span class="line">/* Pass the table variable data to a stored procedure. */  </span><br><span class="line">EXEC usp_InsertProductionLocation @LocationTVP;  </span><br><span class="line">GO  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="H-OUTPUT-커서-매개-변수-사용하기"><a href="#H-OUTPUT-커서-매개-변수-사용하기" class="headerlink" title="H. OUTPUT 커서 매개 변수 사용하기"></a>H. OUTPUT 커서 매개 변수 사용하기</h5><p>다음 예제에서는 OUTPUT cursor 매개 변수를 사용하여 프로 시저에 로컬 인 커서를 호출하는 일괄 처리, 프로 시저 또는 트리거에 다시 전달합니다.</p>
<p>먼저, Currency테이블에 커서를 선언하고 여는 프로 시저를 작성하십시오 .</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE PROCEDURE dbo.uspCurrencyCursor   </span><br><span class="line">    @CurrencyCursor CURSOR VARYING OUTPUT  </span><br><span class="line">AS  </span><br><span class="line">    SET NOCOUNT ON;  </span><br><span class="line">    SET @CurrencyCursor = CURSOR  </span><br><span class="line">    FORWARD_ONLY STATIC FOR  </span><br><span class="line">      SELECT CurrencyCode, Name  </span><br><span class="line">      FROM Sales.Currency;  </span><br><span class="line">    OPEN @CurrencyCursor;  </span><br><span class="line">GO  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>그런 다음 로컬 커서 변수를 선언하는 일괄 처리를 실행하고 프로 시저를 실행하여 커서를 로컬 변수에 할당 한 다음 커서에서 행을 가져옵니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">DECLARE @MyCursor CURSOR;  </span><br><span class="line">EXEC dbo.uspCurrencyCursor @CurrencyCursor = @MyCursor OUTPUT;  </span><br><span class="line">WHILE (@@FETCH_STATUS = 0)  </span><br><span class="line">BEGIN;  </span><br><span class="line">     FETCH NEXT FROM @MyCursor;  </span><br><span class="line">END;  </span><br><span class="line">CLOSE @MyCursor;  </span><br><span class="line">DEALLOCATE @MyCursor;  </span><br><span class="line">GO  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="저장-프로-시저를-사용하여-데이터-수정"><a href="#저장-프로-시저를-사용하여-데이터-수정" class="headerlink" title="저장 프로 시저를 사용하여 데이터 수정"></a>저장 프로 시저를 사용하여 데이터 수정</h4><p>이 섹션의 예제는 프로 시저 정의에 DML (Data Manipulation Language) 문을 포함하여 테이블이나 뷰에 데이터를 삽입하거나 수정하는 방법을 보여줍니다.</p>
<h5 id="I-저장-프로-시저에서-UPDATE-사용"><a href="#I-저장-프로-시저에서-UPDATE-사용" class="headerlink" title="I. 저장 프로 시저에서 UPDATE 사용"></a>I. 저장 프로 시저에서 UPDATE 사용</h5><p>다음 예제에서는 저장 프로 시저에서 UPDATE 문을 사용합니다.<br>이 절차는 하나의 입력 매개 변수 @NewHours와 하나의 출력 매개 변수를 취 @RowCount합니다.<br>@NewHours매개 변수 값은 열을 업데이트 할 UPDATE 문에서 사용되는 VacationHours테이블을 HumanResources.Employee.<br>@RowCount출력 매개 변수는 로컬 변수 해당 행의 수를 리턴하는 데 사용된다.<br>CASE 식은 SET 절에서 조건부로 설정된 값을 결정하는 데 사용됩니다 VacationHours.<br>직원이 매시간 ( SalariedFlag&#x3D; 0) 지불 VacationHours되면 현재 시간 수에 지정된 값을 더한 시간으로 설정됩니다 @NewHours.<br>그렇지 않으면, VacationHours에 지정된 값으로 설정됩니다 @NewHours.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE PROCEDURE HumanResources.Update_VacationHours  </span><br><span class="line">@NewHours smallint  </span><br><span class="line">AS   </span><br><span class="line">SET NOCOUNT ON;  </span><br><span class="line">UPDATE HumanResources.Employee  </span><br><span class="line">SET VacationHours =   </span><br><span class="line">    ( CASE  </span><br><span class="line">         WHEN SalariedFlag = 0 THEN VacationHours + @NewHours  </span><br><span class="line">         ELSE @NewHours  </span><br><span class="line">       END  </span><br><span class="line">    )  </span><br><span class="line">WHERE CurrentFlag = 1;  </span><br><span class="line">GO  </span><br><span class="line">  </span><br><span class="line">EXEC HumanResources.Update_VacationHours 40;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="오류-처리"><a href="#오류-처리" class="headerlink" title="오류 처리"></a>오류 처리</h4><p>이 절의 예제는 저장 프로 시저가 실행될 때 발생할 수있는 오류를 처리하는 방법을 보여줍니다.</p>
<h5 id="J-TRY-…-CATCH-사용하기"><a href="#J-TRY-…-CATCH-사용하기" class="headerlink" title="J. TRY … CATCH 사용하기"></a>J. TRY … CATCH 사용하기</h5><p>다음 예제에서는 TRY … CATCH 구문을 사용하여 저장 프로 시저 실행 중에 catch 된 오류 정보를 반환합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE PROCEDURE Production.uspDeleteWorkOrder ( @WorkOrderID int )  </span><br><span class="line">AS  </span><br><span class="line">SET NOCOUNT ON;  </span><br><span class="line">BEGIN TRY  </span><br><span class="line">   BEGIN TRANSACTION   </span><br><span class="line">   -- Delete rows from the child table, WorkOrderRouting, for the specified work order.  </span><br><span class="line">   DELETE FROM Production.WorkOrderRouting  </span><br><span class="line">   WHERE WorkOrderID = @WorkOrderID;  </span><br><span class="line">  </span><br><span class="line">   -- Delete the rows from the parent table, WorkOrder, for the specified work order.  </span><br><span class="line">   DELETE FROM Production.WorkOrder  </span><br><span class="line">   WHERE WorkOrderID = @WorkOrderID;  </span><br><span class="line">  </span><br><span class="line">   COMMIT  </span><br><span class="line">  </span><br><span class="line">END TRY  </span><br><span class="line">BEGIN CATCH  </span><br><span class="line">  -- Determine if an error occurred.  </span><br><span class="line">  IF @@TRANCOUNT &gt; 0  </span><br><span class="line">     ROLLBACK  </span><br><span class="line">  </span><br><span class="line">  -- Return the error information.  </span><br><span class="line">  DECLARE @ErrorMessage nvarchar(4000),  @ErrorSeverity int;  </span><br><span class="line">  SELECT @ErrorMessage = ERROR_MESSAGE(),@ErrorSeverity = ERROR_SEVERITY();  </span><br><span class="line">  RAISERROR(@ErrorMessage, @ErrorSeverity, 1);  </span><br><span class="line">END CATCH;  </span><br><span class="line">  </span><br><span class="line">GO  </span><br><span class="line">EXEC Production.uspDeleteWorkOrder 13;  </span><br><span class="line">  </span><br><span class="line">/* Intentionally generate an error by reversing the order in which rows </span><br><span class="line">   are deleted from the parent and child tables. This change does not </span><br><span class="line">   cause an error when the procedure definition is altered, but produces </span><br><span class="line">   an error when the procedure is executed.  </span><br><span class="line">*/  </span><br><span class="line">ALTER PROCEDURE Production.uspDeleteWorkOrder ( @WorkOrderID int )  </span><br><span class="line">AS  </span><br><span class="line">  </span><br><span class="line">BEGIN TRY  </span><br><span class="line">   BEGIN TRANSACTION   </span><br><span class="line">      -- Delete the rows from the parent table, WorkOrder, for the specified work order.  </span><br><span class="line">   DELETE FROM Production.WorkOrder  </span><br><span class="line">   WHERE WorkOrderID = @WorkOrderID;  </span><br><span class="line">  </span><br><span class="line">   -- Delete rows from the child table, WorkOrderRouting, for the specified work order.  </span><br><span class="line">   DELETE FROM Production.WorkOrderRouting  </span><br><span class="line">   WHERE WorkOrderID = @WorkOrderID;  </span><br><span class="line">  </span><br><span class="line">   COMMIT TRANSACTION  </span><br><span class="line">  </span><br><span class="line">END TRY  </span><br><span class="line">BEGIN CATCH  </span><br><span class="line">  -- Determine if an error occurred.  </span><br><span class="line">  IF @@TRANCOUNT &gt; 0  </span><br><span class="line">     ROLLBACK TRANSACTION  </span><br><span class="line">  </span><br><span class="line">  -- Return the error information.  </span><br><span class="line">  DECLARE @ErrorMessage nvarchar(4000),  @ErrorSeverity int;  </span><br><span class="line">  SELECT @ErrorMessage = ERROR_MESSAGE(),@ErrorSeverity = ERROR_SEVERITY();  </span><br><span class="line">  RAISERROR(@ErrorMessage, @ErrorSeverity, 1);  </span><br><span class="line">END CATCH;  </span><br><span class="line">GO  </span><br><span class="line">-- Execute the altered procedure.  </span><br><span class="line">EXEC Production.uspDeleteWorkOrder 15;  </span><br><span class="line">  </span><br><span class="line">DROP PROCEDURE Production.uspDeleteWorkOrder;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="프로-시저-정의-난독-화"><a href="#프로-시저-정의-난독-화" class="headerlink" title="프로 시저 정의 난독 화"></a>프로 시저 정의 난독 화</h4><p>이 섹션의 예제는 저장 프로 시저의 정의를 난독 화하는 방법을 보여줍니다.</p>
<h5 id="K-WITH-ENCRYPTION-옵션-사용"><a href="#K-WITH-ENCRYPTION-옵션-사용" class="headerlink" title="K. WITH ENCRYPTION 옵션 사용"></a>K. WITH ENCRYPTION 옵션 사용</h5><p>다음 예제에서는 HumanResources.uspEncryptThis프로 시저 를 만듭니다.</p>
<p>적용 대상 : SQL Server 2008을 통해 SQL Server 2017, SQL 데이터베이스.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE PROCEDURE HumanResources.uspEncryptThis  </span><br><span class="line">WITH ENCRYPTION  </span><br><span class="line">AS  </span><br><span class="line">    SET NOCOUNT ON;  </span><br><span class="line">    SELECT BusinessEntityID, JobTitle, NationalIDNumber, </span><br><span class="line">        VacationHours, SickLeaveHours   </span><br><span class="line">    FROM HumanResources.Employee;  </span><br><span class="line">GO  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>이 WITH ENCRYPTION옵션은 다음 예제와 같이 시스템 카탈로그를 쿼리하거나 메타 데이터 함수를 사용할 때 프로 시저 정의를 난독 화합니다.</p>
<p>실행 sp_helptext:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">EXEC sp_helptext &#x27;HumanResources.uspEncryptThis&#x27;;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>다음은 결과 집합입니다.</p>
<p>The text for object ‘HumanResources.uspEncryptThis’ is encrypted.</p>
<p>sys.sql_modules카탈로그 뷰를 직접 쿼리하십시오 .</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">SELECT definition FROM sys.sql_modules  </span><br><span class="line">WHERE object_id = OBJECT_ID(&#x27;HumanResources.uspEncryptThis&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>다음은 결과 집합입니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">definition  </span><br><span class="line">--------------------------------  </span><br><span class="line">NULL  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="강제로-프로-시저-재-컴파일"><a href="#강제로-프로-시저-재-컴파일" class="headerlink" title="강제로 프로 시저 재 컴파일"></a>강제로 프로 시저 재 컴파일</h4><p>이 절의 예제에서는 WITH RECOMPILE 절을 사용하여 프로 시저가 실행될 때마다 다시 컴파일하도록합니다.</p>
<h5 id="L-WITH-RECOMPILE-옵션-사용"><a href="#L-WITH-RECOMPILE-옵션-사용" class="headerlink" title="L. WITH RECOMPILE 옵션 사용"></a>L. WITH RECOMPILE 옵션 사용</h5><p>이 WITH RECOMPILE절은 프로 시저에 제공되는 매개 변수가 일반이 아니거나 새 실행 계획을 캐시에 저장하거나 메모리에 저장하지 않아야하는 경우에 유용합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">IF OBJECT_ID ( &#x27;dbo.uspProductByVendor&#x27;, &#x27;P&#x27; ) IS NOT NULL   </span><br><span class="line">    DROP PROCEDURE dbo.uspProductByVendor;  </span><br><span class="line">GO  </span><br><span class="line">CREATE PROCEDURE dbo.uspProductByVendor @Name varchar(30) = &#x27;%&#x27;  </span><br><span class="line">WITH RECOMPILE  </span><br><span class="line">AS  </span><br><span class="line">    SET NOCOUNT ON;  </span><br><span class="line">    SELECT v.Name AS &#x27;Vendor name&#x27;, p.Name AS &#x27;Product name&#x27;  </span><br><span class="line">    FROM Purchasing.Vendor AS v   </span><br><span class="line">    JOIN Purchasing.ProductVendor AS pv   </span><br><span class="line">      ON v.BusinessEntityID = pv.BusinessEntityID   </span><br><span class="line">    JOIN Production.Product AS p   </span><br><span class="line">      ON pv.ProductID = p.ProductID  </span><br><span class="line">    WHERE v.Name LIKE @Name;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="보안-컨텍스트-설정"><a href="#보안-컨텍스트-설정" class="headerlink" title="보안 컨텍스트 설정"></a>보안 컨텍스트 설정</h4><p>이 섹션의 예제에서는 EXECUTE AS 절을 사용하여 저장 프로 시저가 실행되는 보안 컨텍스트를 설정합니다.</p>
<h5 id="EXECUTE-AS-절-사용"><a href="#EXECUTE-AS-절-사용" class="headerlink" title="EXECUTE AS 절 사용"></a>EXECUTE AS 절 사용</h5><p>다음 예제에서는 EXECUTE AS 절을 사용하여 프로 시저를 실행할 수있는 보안 컨텍스트를 지정하는 방법을 보여줍니다.<br>이 예제에서이 옵션 CALLER은 프로 시저를 호출하는 사용자의 컨텍스트에서 프로 시저를 실행할 수 있도록 지정합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE PROCEDURE Purchasing.uspVendorAllInfo  </span><br><span class="line">WITH EXECUTE AS CALLER  </span><br><span class="line">AS  </span><br><span class="line">    SET NOCOUNT ON;  </span><br><span class="line">    SELECT v.Name AS Vendor, p.Name AS &#x27;Product name&#x27;,   </span><br><span class="line">      v.CreditRating AS &#x27;Rating&#x27;,   </span><br><span class="line">      v.ActiveFlag AS Availability  </span><br><span class="line">    FROM Purchasing.Vendor v   </span><br><span class="line">    INNER JOIN Purchasing.ProductVendor pv  </span><br><span class="line">      ON v.BusinessEntityID = pv.BusinessEntityID   </span><br><span class="line">    INNER JOIN Production.Product p  </span><br><span class="line">      ON pv.ProductID = p.ProductID   </span><br><span class="line">    ORDER BY v.Name ASC;  </span><br><span class="line">GO  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="N-사용자-지정-권한-집합-만들기"><a href="#N-사용자-지정-권한-집합-만들기" class="headerlink" title="N. 사용자 지정 권한 집합 만들기"></a>N. 사용자 지정 권한 집합 만들기</h5><p>다음 예는 EXECUTE AS를 사용하여 데이터베이스 조작에 대한 사용자 정의 권한을 작성합니다.<br>TRUNCATE TABLE과 같은 일부 작업에는 권한 부여 권한이 없습니다.<br>저장 프로 시저 내에 TRUNCATE TABLE 문을 통합하고 해당 프로 시저가 테이블을 수정할 수있는 권한을 가진 사용자로 실행되도록 지정하면 프로 시저에 대한 EXECUTE 권한을 부여한 사용자에게 테이블을 자르도록 사용 권한을 확장 할 수 있습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE PROCEDURE dbo.TruncateMyTable  </span><br><span class="line">WITH EXECUTE AS SELF  </span><br><span class="line">AS TRUNCATE TABLE MyDB..MyTable;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h1><hr>
<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.microsoft.com/en-us/sql/t-sql/statements/create-procedure-transact-sql">create-procedure-transact-sql</a></li>
</ul>
</div></article><div class="post-meta__tag-list"><a class="post-meta__tags" href="../../../tags/mssql/">mssql</a><a class="post-meta__tags" href="../../../tags/Transact-SQL/">Transact-SQL</a><a class="post-meta__tags" href="../../../tags/CREATE-PROCEDURE/">CREATE PROCEDURE</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="../../06/2019-06-03-mssql_nolock_table_hints/"><i class="fa fa-chevron-left">  </i><span>mssql nolock table hint</span></a></div><div class="next-post pull-right"><a href="../2019-05-29-mssql_create-login-transact-sql/"><span>CREATE LOGIN (Transact-SQL)</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://sejoung.github.io/2019/05/2019-05-31-mssql_create-procedure-transact-sql/';
  this.page.identifier = '2019/05/2019-05-31-mssql_create-procedure-transact-sql/';
  this.page.title = 'mssql CREATE PROCEDURE';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'kimsejoung' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://kimsejoung.disqus.com/count.js" async></script></div></div><footer class="footer-bg" style="background-image: url(https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/Van_Gogh_-_Terrasse_des_Caf%C3%A9s_an_der_Place_du_Forum_in_Arles_am_Abend1.jpeg/1024px-Van_Gogh_-_Terrasse_des_Caf%C3%A9s_an_der_Place_du_Forum_in_Arles_am_Abend1.jpeg)"><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2023 By sejoung</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="external nofollow noopener noreferrer" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="../../../js/third-party/anime.min.js"></script><script src="../../../js/third-party/jquery.min.js"></script><script src="../../../js/third-party/jquery.fancybox.min.js"></script><script src="../../../js/third-party/velocity.min.js"></script><script src="../../../js/third-party/velocity.ui.min.js"></script><script src="../../../js/utils.js?version=1.7.0"></script><script src="../../../js/fancybox.js?version=1.7.0"></script><script src="../../../js/sidebar.js?version=1.7.0"></script><script src="../../../js/copy.js?version=1.7.0"></script><script src="../../../js/fireworks.js?version=1.7.0"></script><script src="../../../js/transition.js?version=1.7.0"></script><script src="../../../js/scroll.js?version=1.7.0"></script><script src="../../../js/head.js?version=1.7.0"></script><script src="../../../js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>